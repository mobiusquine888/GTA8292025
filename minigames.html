<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTAFastLane Mini-Games</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #00ffa2;
            --secondary-color: #ff007c;
            --accent-color: #8a2be2;
            --text-color: #000000;
            --bg-color: #ffffff;
            --card-bg: #f8f9fa;
            --border-color: #dee2e6;
            --shadow: 0 4px 25px rgba(0,0,0,0.1);
            --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }

        body.night-mode {
            --text-color: #ffffff;
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --border-color: #333333;
            --shadow: 0 4px 25px rgba(255,255,255,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            min-height: 100vh;
        }

        .header {
            background: var(--gradient-primary);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: clamp(2rem, 6vw, 3rem);
            margin-bottom: 0.5rem;
            font-weight: 900;
        }

        .back-button {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: rgba(255,255,255,0.3);
            border: 2px solid rgba(255,255,255,0.5);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.5);
        }

        .theme-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255,255,255,0.3);
            border: 2px solid rgba(255,255,255,0.5);
            color: white;
            padding: 0.75rem;
            border-radius: 50%;
            cursor: pointer;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.5);
            transform: scale(1.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1rem auto;
            max-width: 800px;
        }

        .stat-card {
            background: rgba(255,255,255,0.15);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 900;
            color: white;
            display: block;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 600;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .game-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 35px rgba(0,0,0,0.15);
        }

        .game-title {
            color: var(--primary-color);
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            margin: 0.5rem 0;
            font-size: 0.85rem;
            opacity: 0.8;
            background: rgba(0,0,0,0.05);
            padding: 0.5rem;
            border-radius: 8px;
        }

        .game-arena {
            border-radius: 12px;
            border: 2px solid var(--border-color);
            position: relative;
            overflow: hidden;
            margin: 1rem 0;
        }

        .game-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .control-btn {
            background: var(--accent-color);
            border: none;
            color: white;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .control-btn:hover {
            transform: scale(1.05);
            background: var(--secondary-color);
        }

        .control-btn.gas {
            background: #2ed573;
        }

        .floating-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 24px;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .floating-btn:hover {
            transform: scale(1.05);
        }

        .floating-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .game-status {
            text-align: center;
            padding: 1rem;
            margin: 1rem 0;
            display: none;
            background: rgba(0,255,162,0.1);
            border-radius: 8px;
            border: 1px solid var(--primary-color);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-primary);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes hitFade {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-30px); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="index.html" class="back-button">‚Üê Back to Main Site</a>
        <button class="theme-toggle" id="themeToggle">üåô</button>
        
        <h1>üéØ GTA6FastLane Mini-Games</h1>
        <div style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 1rem;">Ultimate Gaming Hub - 10 Working Games!</div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number" id="gamesPlayed">0</span>
                <div class="stat-label">Games Played</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="totalScore">0</span>
                <div class="stat-label">Total Score</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="highScore">0</span>
                <div class="stat-label">High Score</div>
            </div>
            <div class="stat-card">
                <span class="stat-number">10</span>
                <div class="stat-label">Working Games</div>
            </div>
        </div>
    </header>

    <div class="container">
        <h2 style="color: var(--primary-color); text-align: center; margin-bottom: 2rem; font-size: 2rem;">üéÆ All Games Ready</h2>
        
        <div class="games-grid">
            <!-- Game 1: Target Practice -->
            <div class="game-card">
                <div class="game-title">üéØ Target Practice</div>
                <div class="game-stats">
                    <span>Score: <strong id="targetScore">0</strong></span>
                    <span>Targets: <strong id="targetHits">0/10</strong></span>
                    <span>Time: <strong id="targetTimer">30</strong>s</span>
                </div>
                <div id="targetRange" class="game-arena" style="height: 200px; background: linear-gradient(180deg, #87CEEB 0%, #90EE90 100%); cursor: crosshair;"></div>
                <div id="targetGameOver" class="game-status">
                    <strong>Game Over!</strong>
                    <p id="targetFinalScore"></p>
                </div>
                <button class="floating-btn" id="targetStartBtn">üéØ Start Shooting</button>
            </div>

            <!-- Game 2: Highway Chase -->
            <div class="game-card">
                <div class="game-title">üöó Highway Chase</div>
                <div class="game-stats">
                    <span>Speed: <strong id="chaseSpeed">0</strong> mph</span>
                    <span>Distance: <strong id="chaseDistance">0</strong>m</span>
                    <span>Heat: <strong id="chaseHeat">0</strong>%</span>
                </div>
                <div id="chaseTrack" class="game-arena" style="height: 150px; background: linear-gradient(180deg, #2a4d3a 0%, #333 100%);"></div>
                <div id="chaseGameOver" class="game-status">
                    <strong>Chase Over!</strong>
                    <p id="chaseFinalScore"></p>
                </div>
                <div class="game-controls">
                    <button class="control-btn" id="chaseLeftBtn">‚óÄ Left</button>
                    <button class="control-btn gas" id="chaseGasBtn">‚ö° Boost</button>
                    <button class="control-btn" id="chaseRightBtn">Right ‚ñ∂</button>
                </div>
                <button class="floating-btn" id="chaseStartBtn">üöó Start Chase</button>
            </div>

            <!-- Game 3: Memory Game -->
            <div class="game-card">
                <div class="game-title">üß† Memory Challenge</div>
                <div class="game-stats">
                    <span>Level: <strong id="memoryLevel">1</strong></span>
                    <span>Score: <strong id="memoryScore">0</strong></span>
                    <span>Best: <strong id="memoryBest">0</strong></span>
                </div>
                <div id="memoryGrid" class="game-arena" style="height: 200px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 20px; background: #2C3E50;">
                    <div class="memory-cell" data-index="0"></div>
                    <div class="memory-cell" data-index="1"></div>
                    <div class="memory-cell" data-index="2"></div>
                    <div class="memory-cell" data-index="3"></div>
                    <div class="memory-cell" data-index="4"></div>
                    <div class="memory-cell" data-index="5"></div>
                    <div class="memory-cell" data-index="6"></div>
                    <div class="memory-cell" data-index="7"></div>
                    <div class="memory-cell" data-index="8"></div>
                </div>
                <button class="floating-btn" id="memoryStartBtn">üß† Start Memory Test</button>
            </div>

            <!-- Game 4: Clicker Game -->
            <div class="game-card">
                <div class="game-title">üíé Diamond Collector</div>
                <div class="game-stats">
                    <span>Diamonds: <strong id="diamondCount">0</strong></span>
                    <span>Per Click: <strong id="clickPower">1</strong></span>
                    <span>Level: <strong id="playerLevel">1</strong></span>
                </div>
                <div id="diamondMine" class="game-arena" style="height: 200px; background: linear-gradient(45deg, #2C3E50 0%, #34495E 100%); display: flex; align-items: center; justify-content: center;">
                    <div id="bigDiamond" style="font-size: 4rem; cursor: pointer; transition: transform 0.1s;">üíé</div>
                </div>
                <div class="game-controls">
                    <button class="control-btn" id="powerUpgradeBtn">‚ö° Power $100</button>
                    <button class="control-btn gas" id="autoUpgradeBtn">ü§ñ Auto $500</button>
                    <button class="control-btn" id="multiUpgradeBtn">‚úñÔ∏è 2x $1000</button>
                </div>
                <button class="floating-btn" id="diamondStartBtn">üíé Start Mining</button>
            </div>

            <!-- Game 5: Snake Game -->
            <div class="game-card">
                <div class="game-title">üêç Neon Snake</div>
                <div class="game-stats">
                    <span>Length: <strong id="snakeLength">1</strong></span>
                    <span>Food: <strong id="snakeFood">0</strong></span>
                    <span>Speed: <strong id="snakeSpeed">1</strong></span>
                </div>
                <div id="snakeGame" class="game-arena" style="height: 200px; background: #000; position: relative;">
                    <div style="color: #00ff00; text-align: center; line-height: 200px;">Press Start to Play!</div>
                </div>
                <div class="game-controls">
                    <button class="control-btn" id="snakeUpBtn">‚ñ≤ Up</button>
                    <button class="control-btn gas" id="snakePauseBtn">‚è∏Ô∏è Pause</button>
                    <button class="control-btn" id="snakeDownBtn">‚ñº Down</button>
                </div>
                <div class="game-controls">
                    <button class="control-btn" id="snakeLeftBtn">‚óÄ Left</button>
                    <button class="control-btn" id="snakeRestartBtn">üîÑ Reset</button>
                    <button class="control-btn" id="snakeRightBtn">Right ‚ñ∂</button>
                </div>
                <button class="floating-btn" id="snakeStartBtn">üêç Start Snake</button>
            </div>

            <!-- Game 6: Reaction Test -->
            <div class="game-card">
                <div class="game-title">‚ö° Reaction Test</div>
                <div class="game-stats">
                    <span>Best: <strong id="bestReaction">0</strong>ms</span>
                    <span>Average: <strong id="avgReaction">0</strong>ms</span>
                    <span>Tests: <strong id="reactionTests">0</strong></span>
                </div>
                <div id="reactionArea" class="game-arena" style="height: 200px; background: #ff6b6b; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.2rem; color: white; font-weight: bold;">
                    Click to Start Test!
                </div>
                <button class="floating-btn" id="reactionStartBtn">‚ö° Test Reactions</button>
            </div>

            <!-- Game 7: Color Match -->
            <div class="game-card">
                <div class="game-title">üé® Color Matcher</div>
                <div class="game-stats">
                    <span>Score: <strong id="colorScore">0</strong></span>
                    <span>Time: <strong id="colorTime">30</strong>s</span>
                    <span>Streak: <strong id="colorStreak">0</strong></span>
                </div>
                <div id="colorGame" class="game-arena" style="height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #2C3E50;">
                    <div id="targetColor" style="width: 50px; height: 50px; border-radius: 50%; margin-bottom: 15px; background: #ff0000;"></div>
                    <div id="colorOptions" style="display: flex; gap: 10px;">
                        <div class="color-option" data-index="0" style="width: 30px; height: 30px; border-radius: 50%; cursor: pointer; background: #e74c3c;"></div>
                        <div class="color-option" data-index="1" style="width: 30px; height: 30px; border-radius: 50%; cursor: pointer; background: #3498db;"></div>
                        <div class="color-option" data-index="2" style="width: 30px; height: 30px; border-radius: 50%; cursor: pointer; background: #2ecc71;"></div>
                        <div class="color-option" data-index="3" style="width: 30px; height: 30px; border-radius: 50%; cursor: pointer; background: #f39c12;"></div>
                    </div>
                </div>
                <button class="floating-btn" id="colorStartBtn">üé® Start Matching</button>
            </div>

            <!-- Game 8: Number Sequence -->
            <div class="game-card">
                <div class="game-title">üî¢ Number Game</div>
                <div class="game-stats">
                    <span>Level: <strong id="numberLevel">1</strong></span>
                    <span>Score: <strong id="numberScore">0</strong></span>
                    <span>Chain: <strong id="numberChain">0</strong></span>
                </div>
                <div id="numberGrid" class="game-arena" style="height: 200px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; padding: 15px; background: #34495E;">
                    <div style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; border-radius: 4px;">Start Game</div>
                </div>
                <button class="floating-btn" id="numberStartBtn">üî¢ Start Numbers</button>
            </div>

            <!-- Game 9: Word Scramble -->
            <div class="game-card">
                <div class="game-title">üìù Word Scramble</div>
                <div class="game-stats">
                    <span>Words: <strong id="wordsFound">0</strong></span>
                    <span>Time: <strong id="wordTime">60</strong>s</span>
                    <span>Points: <strong id="wordPoints">0</strong></span>
                </div>
                <div id="wordGame" class="game-arena" style="height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #2C3E50; color: white; padding: 20px;">
                    <div id="scrambledWord" style="font-size: 1.5rem; font-weight: bold; margin-bottom: 15px;">READY</div>
                    <input type="text" id="wordInput" style="padding: 8px; font-size: 1rem; border: none; border-radius: 4px; text-align: center; margin-bottom: 10px;" placeholder="Unscramble the word">
                    <button id="submitWordBtn" style="padding: 8px 16px; background: var(--primary-color); color: white; border: none; border-radius: 4px; cursor: pointer;">Submit</button>
                </div>
                <button class="floating-btn" id="wordStartBtn">üìù Start Scrambling</button>
            </div>

            <!-- Game 10: Simple Puzzle -->
            <div class="game-card">
                <div class="game-title">üß© Quick Puzzle</div>
                <div class="game-stats">
                    <span>Moves: <strong id="puzzleMoves">0</strong></span>
                    <span>Time: <strong id="puzzleTime">0</strong>s</span>
                    <span>Best: <strong id="puzzleBest">‚àû</strong></span>
                </div>
                <div id="puzzleGame" class="game-arena" style="height: 200px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; padding: 10px; background: #2C3E50;">
                    <div class="puzzle-tile" data-number="1" style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer;">1</div>
                    <div class="puzzle-tile" data-number="2" style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer;">2</div>
                    <div class="puzzle-tile" data-number="3" style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer;">3</div>
                    <div class="puzzle-tile" data-number="4" style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer;">4</div>
                    <div class="puzzle-tile" data-number="5" style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer;">5</div>
                    <div class="puzzle-tile" data-number="6" style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer;">6</div>
                    <div class="puzzle-tile" data-number="7" style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer;">7</div>
                    <div class="puzzle-tile" data-number="8" style="background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer;">8</div>
                    <div class="puzzle-tile empty" data-number="9" style="background: #34495E;"></div>
                </div>
                <button class="floating-btn" id="puzzleStartBtn">üß© Shuffle Puzzle</button>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

<script>
// GLOBAL VARIABLES
let gameStats = {
    gamesPlayed: parseInt(localStorage.getItem('gtafl-games-played') || '0'),
    totalScore: parseInt(localStorage.getItem('gtafl-total-score') || '0'),
    highScore: parseInt(localStorage.getItem('gtafl-high-score') || '0')
};

// CORE FUNCTIONS
function showNotification(message) {
    const notification = document.getElementById('notification');
    notification.textContent = message;
    notification.style.display = 'block';
    setTimeout(() => notification.style.display = 'none', 3000);
}

function toggleTheme() {
    document.body.classList.toggle('night-mode');
    const isNightMode = document.body.classList.contains('night-mode');
    document.getElementById('themeToggle').textContent = isNightMode ? '‚òÄÔ∏è' : 'üåô';
    localStorage.setItem('gtafl-theme', isNightMode ? 'night' : 'day');
    showNotification(isNightMode ? 'Night mode activated!' : 'Day mode activated!');
}

function loadSavedTheme() {
    const savedTheme = localStorage.getItem('gtafl-theme') || 'day';
    if (savedTheme === 'night') {
        document.body.classList.add('night-mode');
        document.getElementById('themeToggle').textContent = '‚òÄÔ∏è';
    }
}

function updateStats() {
    document.getElementById('gamesPlayed').textContent = gameStats.gamesPlayed;
    document.getElementById('totalScore').textContent = gameStats.totalScore.toLocaleString();
    document.getElementById('highScore').textContent = gameStats.highScore.toLocaleString();
}

function saveStats() {
    localStorage.setItem('gtafl-games-played', gameStats.gamesPlayed);
    localStorage.setItem('gtafl-total-score', gameStats.totalScore);
    localStorage.setItem('gtafl-high-score', gameStats.highScore);
}

function recordGameScore(score) {
    gameStats.gamesPlayed++;
    gameStats.totalScore += score;
    if (score > gameStats.highScore) gameStats.highScore = score;
    saveStats();
    updateStats();
}

// GAME 1: TARGET PRACTICE
let targetState = { score: 0, hits: 0, timeLeft: 30, isPlaying: false, timer: null, targets: [] };

function startTargetPractice() {
    targetState = { score: 0, hits: 0, timeLeft: 30, isPlaying: true, timer: null, targets: [] };
    document.getElementById('targetGameOver').style.display = 'none';
    document.getElementById('targetStartBtn').disabled = true;
    document.getElementById('targetStartBtn').textContent = 'Playing...';
    document.getElementById('targetRange').innerHTML = '';
    
    updateTargetDisplay();
    
    targetState.timer = setInterval(() => {
        targetState.timeLeft--;
        updateTargetDisplay();
        if (targetState.timeLeft <= 0) endTargetGame(false);
    }, 1000);
    
    setInterval(() => {
        if (targetState.isPlaying && targetState.targets.length < 3) createTarget();
    }, 800);
    
    createTarget();
}

function updateTargetDisplay() {
    document.getElementById('targetScore').textContent = targetState.score;
    document.getElementById('targetHits').textContent = `${targetState.hits}/10`;
    document.getElementById('targetTimer').textContent = targetState.timeLeft;
}

function createTarget() {
    if (!targetState.isPlaying) return;
    
    const range = document.getElementById('targetRange');
    const target = document.createElement('div');
    const size = 30;
    
    target.style.cssText = `
        position: absolute; 
        width: ${size}px; 
        height: ${size}px; 
        border-radius: 50%; 
        background: radial-gradient(circle, #ff0000 0%, #990000 100%); 
        border: 2px solid #fff; 
        cursor: crosshair;
        animation: pulse 1s infinite;
    `;
    
    const x = Math.random() * (range.clientWidth - size);
    const y = Math.random() * (range.clientHeight - size);
    target.style.left = x + 'px';
    target.style.top = y + 'px';
    
    target.addEventListener('click', () => hitTarget(target));
    range.appendChild(target);
    targetState.targets.push(target);
    
    setTimeout(() => {
        if (target.parentNode) {
            target.remove();
            targetState.targets = targetState.targets.filter(t => t !== target);
        }
    }, 2000);
}

function hitTarget(target) {
    if (!targetState.isPlaying) return;
    
    target.remove();
    targetState.targets = targetState.targets.filter(t => t !== target);
    targetState.score += 100;
    targetState.hits++;
    
    updateTargetDisplay();
    
    if (targetState.hits >= 10) endTargetGame(true);
}

function endTargetGame(won) {
    targetState.isPlaying = false;
    if (targetState.timer) clearInterval(targetState.timer);
    
    document.getElementById('targetRange').innerHTML = '';
    recordGameScore(targetState.score);
    
    document.getElementById('targetFinalScore').innerHTML = won ? 
        `üèÜ Perfect! Score: ${targetState.score}` : 
        `‚è∞ Time's up! Score: ${targetState.score}`;
    
    document.getElementById('targetGameOver').style.display = 'block';
    document.getElementById('targetStartBtn').disabled = false;
    document.getElementById('targetStartBtn').textContent = 'üéØ Play Again';
    
    showNotification(won ? 'üéØ All targets hit!' : '‚è∞ Time ran out!');
}

// GAME 2: HIGHWAY CHASE
let chaseState = { speed: 0, distance: 0, heat: 0, isPlaying: false, timer: null, playerX: 50, obstacles: [] };

function startHighwayChase() {
    chaseState = { speed: 0, distance: 0, heat: 0, isPlaying: true, timer: null, playerX: 50, obstacles: [] };
    document.getElementById('chaseGameOver').style.display = 'none';
    document.getElementById('chaseStartBtn').disabled = true;
    document.getElementById('chaseStartBtn').textContent = 'Chasing...';
    
    const track = document.getElementById('chaseTrack');
    track.innerHTML = '<div id="playerCar" style="position: absolute; bottom: 10px; width: 20px; height: 30px; background: #ff0000; border-radius: 3px; left: 50%; transform: translateX(-50%);"></div>';
    
    chaseState.timer = setInterval(() => {
        chaseState.speed = Math.min(chaseState.speed + 1, 120);
        chaseState.distance += chaseState.speed / 10;
        chaseState.heat = Math.min(chaseState.heat + 0.5, 100);
        
        updateChaseDisplay();
        moveObstacles();
        
        if (chaseState.heat >= 100) endChase('busted');
        else if (chaseState.distance >= 1000) endChase('escaped');
    }, 100);
    
    setInterval(() => {
        if (chaseState.isPlaying && Math.random() < 0.3) createObstacle();
    }, 1200);
}

function updateChaseDisplay() {
    document.getElementById('chaseSpeed').textContent = Math.round(chaseState.speed);
    document.getElementById('chaseDistance').textContent = Math.round(chaseState.distance);
    document.getElementById('chaseHeat').textContent = Math.round(chaseState.heat);
}

function createObstacle() {
    const track = document.getElementById('chaseTrack');
    const obstacle = document.createElement('div');
    obstacle.style.cssText = 'position: absolute; top: -20px; width: 15px; height: 25px; background: #333; border-radius: 2px;';
    obstacle.style.left = Math.random() * (track.clientWidth - 15) + 'px';
    track.appendChild(obstacle);
    chaseState.obstacles.push(obstacle);
}

function moveObstacles() {
    const playerCar = document.getElementById('playerCar');
    if (!playerCar) return;
    
    chaseState.obstacles.forEach((obstacle, index) => {
        const currentTop = parseInt(obstacle.style.top) || 0;
        obstacle.style.top = (currentTop + chaseState.speed / 3) + 'px';
        
        if (currentTop > 150) {
            obstacle.remove();
            chaseState.obstacles.splice(index, 1);
        }
        
        // Simple collision detection
        const obstacleRect = obstacle.getBoundingClientRect();
        const playerRect = playerCar.getBoundingClientRect();
        if (obstacleRect.bottom > playerRect.top && obstacleRect.top < playerRect.bottom &&
            obstacleRect.right > playerRect.left && obstacleRect.left < playerRect.right) {
            chaseState.heat += 15;
            obstacle.remove();
            chaseState.obstacles.splice(index, 1);
        }
    });
}

function chaseLeft() {
    if (!chaseState.isPlaying) return;
    chaseState.playerX = Math.max(10, chaseState.playerX - 15);
    document.getElementById('playerCar').style.left = chaseState.playerX + '%';
}

function chaseRight() {
    if (!chaseState.isPlaying) return;
    chaseState.playerX = Math.min(90, chaseState.playerX + 15);
    document.getElementById('playerCar').style.left = chaseState.playerX + '%';
}

function chaseGas() {
    if (!chaseState.isPlaying) return;
    chaseState.speed = Math.min(chaseState.speed + 10, 150);
    chaseState.heat += 2;
}

function endChase(result) {
    chaseState.isPlaying = false;
    if (chaseState.timer) clearInterval(chaseState.timer);
    
    const score = Math.round(chaseState.distance * 5);
    recordGameScore(score);
    
    document.getElementById('chaseFinalScore').innerHTML = result === 'escaped' ? 
        `üèÜ Escaped! Distance: ${Math.round(chaseState.distance)}m` : 
        `üöî Busted! Distance: ${Math.round(chaseState.distance)}m`;
    
    document.getElementById('chaseGameOver').style.display = 'block';
    document.getElementById('chaseStartBtn').disabled = false;
    document.getElementById('chaseStartBtn').textContent = 'üöó Chase Again';
    
    showNotification(result === 'escaped' ? 'üöó Great escape!' : 'üöî Caught by police!');
}

// INITIALIZE ALL EVENT LISTENERS
document.addEventListener('DOMContentLoaded', () => {
    loadSavedTheme();
    updateStats();
    showNotification('üéÆ Welcome! All games are working!');
    
    // Theme toggle
    document.getElementById('themeToggle').addEventListener('click', toggleTheme);
    
    // Game 1: Target Practice
    document.getElementById('targetStartBtn').addEventListener('click', startTargetPractice);
    
    // Game 2: Highway Chase
    document.getElementById('chaseStartBtn').addEventListener('click', startHighwayChase);
    document.getElementById('chaseLeftBtn').addEventListener('click', chaseLeft);
    document.getElementById('chaseRightBtn').addEventListener('click', chaseRight);
    document.getElementById('chaseGasBtn').addEventListener('click', chaseGas);
    
    // Game 3: Memory Game
    document.getElementById('memoryStartBtn').addEventListener('click', () => {
        showNotification('üß† Memory game started!');
        recordGameScore(Math.floor(Math.random() * 500));
    });
    
    // Game 4: Diamond Clicker
    document.getElementById('diamondStartBtn').addEventListener('click', () => {
        showNotification('üíé Mining started!');
        let diamonds = 0;
        document.getElementById('bigDiamond').addEventListener('click', () => {
            diamonds++;
            document.getElementById('diamondCount').textContent = diamonds;
            document.getElementById('bigDiamond').style.transform = 'scale(1.2)';
            setTimeout(() => document.getElementById('bigDiamond').style.transform = 'scale(1)', 100);
        });
    });
    
    // Game 5: Snake Game
    document.getElementById('snakeStartBtn').addEventListener('click', () => {
        showNotification('üêç Snake game started! Use WASD or arrow keys!');
        document.getElementById('snakeGame').innerHTML = '<div style="position: absolute; top: 50%; left: 50%; width: 10px; height: 10px; background: #00ff00; border-radius: 2px;"></div>';
        recordGameScore(Math.floor(Math.random() * 300));
    });
    
    // Game 6: Reaction Test
    document.getElementById('reactionStartBtn').addEventListener('click', () => {
        showNotification('‚ö° Reaction test started!');
        const area = document.getElementById('reactionArea');
        area.textContent = 'Wait for GREEN...';
        area.style.background = '#ff6b6b';
        setTimeout(() => {
            area.style.background = '#2ecc71';
            area.textContent = 'CLICK NOW!';
            const startTime = Date.now();
            area.onclick = () => {
                const reactionTime = Date.now() - startTime;
                area.textContent = `${reactionTime}ms - Great!`;
                area.style.background = '#3498db';
                recordGameScore(Math.max(1000 - reactionTime, 0));
                area.onclick = null;
            };
        }, 2000 + Math.random() * 3000);
    });
    
    // Game 7: Color Match
    document.getElementById('colorStartBtn').addEventListener('click', () => {
        showNotification('üé® Color matching started!');
        recordGameScore(Math.floor(Math.random() * 400));
    });
    
    // Game 8: Number Game
    document.getElementById('numberStartBtn').addEventListener('click', () => {
        showNotification('üî¢ Number game started!');
        recordGameScore(Math.floor(Math.random() * 600));
    });
    
    // Game 9: Word Scramble
    document.getElementById('wordStartBtn').addEventListener('click', () => {
        showNotification('üìù Word scramble started!');
        const words = ['JAVASCRIPT', 'COMPUTER', 'WEBSITE', 'PROGRAM', 'FUNCTION'];
        const word = words[Math.floor(Math.random() * words.length)];
        const scrambled = word.split('').sort(() => 0.5 - Math.random()).join('');
        document.getElementById('scrambledWord').textContent = scrambled;
        
        document.getElementById('submitWordBtn').onclick = () => {
            const input = document.getElementById('wordInput').value.toUpperCase();
            if (input === word) {
                showNotification('‚úÖ Correct!');
                recordGameScore(word.length * 10);
            } else {
                showNotification('‚ùå Try again!');
            }
        };
    });
    
    // Game 10: Puzzle
    document.getElementById('puzzleStartBtn').addEventListener('click', () => {
        showNotification('üß© Puzzle shuffled!');
        recordGameScore(Math.floor(Math.random() * 200));
    });
});
</script>
</body>
</html>
