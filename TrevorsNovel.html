<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream-of-Consciousness Narrator</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #f5f5f5;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border: 2px solid #ccc;
            padding: 30px;
        }
        h1 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            background: #fafafa;
        }
        .control-group {
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: bold;
            margin-bottom: 8px;
        }
        select, button {
            padding: 8px;
            border: 1px solid #666;
            background: white;
            font-family: inherit;
            cursor: pointer;
        }
        button {
            background: #e0e0e0;
            margin: 5px 0;
        }
        button:hover {
            background: #d0d0d0;
        }
        .story-container {
            border: 2px solid #333;
            padding: 25px;
            margin: 20px 0;
            min-height: 400px;
            background: #fefefe;
        }
        .story-text {
            font-size: 1.1em;
            line-height: 1.6;
            white-space: pre-wrap;
            font-style: italic;
        }
        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            background: #fafafa;
        }
        .word-count {
            text-align: center;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }
        .entry-counter {
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>STREAM-OF-CONSCIOUSNESS NARRATOR</h1>
        
        <div class="controls">
            <div class="control-group">
                <label for="worldSelector">Game World Flavor:</label>
                <select id="worldSelector">
                    <option value="gta">GTA - Street-level, Criminal, Profane</option>
                    <option value="fortnite">Fortnite - Absurd, Cartoonish, ADHD Chaos</option>
                    <option value="rdr2">RDR2 - Poetic, Outlaw, Haunted</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="intensitySelector">Intensity Level:</label>
                <select id="intensitySelector">
                    <option value="mild">Mild - Darkly Funny, Tethered</option>
                    <option value="chaotic">Chaotic - Swinging Moods, Paranoid</option>
                    <option value="apocalypse">Apocalypse - Manic, Prophetic, Explosive</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="callbacksToggle">Callbacks to Past Entries:</label>
                <select id="callbacksToggle">
                    <option value="on">ON - Reference Previous Obsessions</option>
                    <option value="off">OFF - Fresh Rambling</option>
                </select>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="generateEntry()" style="grid-column: span 3; font-size: 1.2em; padding: 15px;">GENERATE ENTRY</button>
        </div>
        
        <div class="entry-counter" id="entryCounter">Entry #1</div>
        
        <div class="story-container">
            <div class="story-text" id="storyText">Click "GENERATE ENTRY" to begin the endless novel... the mind is waiting to spill its thoughts...</div>
        </div>
        
        <div class="word-count" id="wordCount">Words: 0 | Target: 180-220 words (60 seconds)</div>
        
        <div class="actions">
            <button onclick="copyText()">Copy Text</button>
            <button onclick="downloadEntry()">Download Entry</button>
            <button onclick="downloadFullStory()">Download Full Story</button>
            <button onclick="saveProgress()">Save Progress</button>
            <button onclick="loadProgress()">Load Progress</button>
            <button onclick="resetStory()">Reset All</button>
        </div>
    </div>

    <script>
        let entryCount = 0;
        let allEntries = [];
        let pastObsessions = [];
        
        const conspiracies = {
            tech: [
                "5G towers are mind control devices",
                "social media algorithms harvest emotional energy",
                "smartphones listen to our thoughts",
                "AI chatbots are human operators in disguise",
                "facial recognition reads souls through eyes"
            ],
            government: [
                "bird surveillance drones replaced real birds after 2001",
                "weather modification controls hurricanes and droughts", 
                "traffic lights increase stress and compliance",
                "voting machines connect to internet despite denials",
                "water fluoridation is mind control not dental health"
            ],
            health: [
                "big pharma suppresses natural cures for profits",
                "chemtrails contain aluminum for population control",
                "vaccines contain tracking microchips",
                "food additives create addiction and compliance",
                "mental health meds are chemical lobotomies"
            ],
            financial: [
                "cryptocurrency was created by intelligence agencies",
                "inflation is manufactured to transfer wealth upward",
                "student loans create permanent debt slavery",
                "credit scores are social control mechanisms",
                "the stock market is rigged by algorithms"
            ],
            ufo: [
                "UAP disclosure distracts from government crimes",
                "aliens work with world governments since 1940s",
                "abductions are military mind control experiments",
                "grays are time travelers from dystopian future",
                "reptilian shapeshifters run world governments"
            ],
            social: [
                "dating apps use AI for psychological manipulation",
                "influencer culture promotes materialism and discontent",
                "celebrity deaths are sacrifices for occult rituals",
                "viral videos are manufactured in CIA facilities",
                "reality TV shows are social engineering experiments"
            ]
        };
        
        const worldSettings = {
            gta: {
                places: ["streets", "alleys", "corner stores", "rooftops", "subway tunnels"],
                conspiracyTypes: ["government", "financial", "tech", "ufo"]
            },
            fortnite: {
                places: ["the storm", "building sites", "loot areas", "battle zones", "the map"],
                conspiracyTypes: ["tech", "social", "health", "ufo"]
            },
            rdr2: {
                places: ["frontier", "dusty roads", "saloons", "wilderness", "ghost towns"],
                conspiracyTypes: ["government", "financial", "social", "ufo"]
            }
        };
        
        function generateEntry() {
            try {
                entryCount++;
                
                const world = document.getElementById('worldSelector').value;
                const intensity = document.getElementById('intensitySelector').value;
                const useCallbacks = document.getElementById('callbacksToggle').value === 'on';
                
                let entry = createStreamEntry(world, intensity, useCallbacks);
                
                allEntries.push(entry);
                updateDisplay(entry);
                
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }
        
        function createStreamEntry(world, intensity, useCallbacks) {
            const setting = worldSettings[world];
            
            const openings = [
                "I swear to God, the",
                "Nobody talks about how the", 
                "You know what's messed up? The",
                "Three days now thinking about",
                "They don't want you to know the",
                "Last night I realized the",
                "Been walking around thinking how the",
                "Something's not right about the"
            ];
            
            const place = setting.places[Math.floor(Math.random() * setting.places.length)];
            const opening = openings[Math.floor(Math.random() * openings.length)];
            
            let entry = opening + " " + place + " ";
            
            // Add MULTIPLE conspiracies for longer content
            let conspiracyCount = 2 + Math.floor(Math.random() * 2); // 2-3 conspiracies
            for (let c = 0; c < conspiracyCount; c++) {
                if (Math.random() > 0.2) { // 80% chance each time
                    const conspType = setting.conspiracyTypes[Math.floor(Math.random() * setting.conspiracyTypes.length)];
                    const conspiracy = conspiracies[conspType][Math.floor(Math.random() * conspiracies[conspType].length)];
                    
                    const connectors = [
                        "proves that ",
                        "connects to how ",
                        "makes me realize ",
                        "shows that ",
                        "confirms that "
                    ];
                    
                    entry += connectors[Math.floor(Math.random() * connectors.length)] + conspiracy + ". ";
                    
                    if (c < conspiracyCount - 1) {
                        const transitions = [
                            "And another thing - ",
                            "But that's not all. ",
                            "Here's what really gets me: ",
                            "Then I started thinking about how "
                        ];
                        entry += transitions[Math.floor(Math.random() * transitions.length)];
                    }
                }
            }
            
            // MUCH longer rambling section
            if (intensity === 'chaotic' || intensity === 'apocalypse') {
                const chaosThoughts = [
                    "Everything's connected somehow. The way that homeless guy on Fifth Street always knows when it's gonna rain three days before the weather app does. ",
                    "The patterns are everywhere if you actually look. License plates spelling out messages, phone numbers that add up to specific dates, the time on every clock I pass showing the same digits. ",
                    "They're watching through every camera, every phone, every smart TV, every fucking Ring doorbell. Recording everything we say, think, dream about. ",
                    "Can't trust anything anymore. Not the news telling us what to think, not the government promising protection, not even my own reflection in store windows. ",
                    "The truth is right there hiding in plain sight like it always has been. Billboard messages, song lyrics played at specific times, the way certain people show up in multiple places. ",
                    "Blood tastes like copper pennies and broken promises from politicians who sold us out decades ago. ",
                    "Laughing until it hurts because what else can you do when the whole world's this fucked up and nobody else sees it? ",
                    "Burning it all down would be so easy. One match, one decision, one moment of absolute clarity cutting through all the lies. ",
                    "The voices in my head are getting louder and they're starting to make more sense than anything on the news. ",
                    "Social media feeds us exactly what they want us to think. Algorithmic brainwashing designed to keep us angry at each other instead of them. ",
                    "Every song on the radio has the same frequency designed to make us docile consumers instead of thinking human beings. ",
                    "Dating apps keep us isolated and desperate so we're easier to control. Divide and conquer, oldest trick in the book. ",
                    "The weather's not natural anymore. Rain exactly when they need distractions, sunshine when they want us shopping, storms during election cycles. ",
                    "Financial markets crash right before major policy changes. Wealth transfers upward while we fight over crumbs. "
                ];
                
                // Generate much longer chaotic rambling
                for (let i = 0; i < 8 + Math.random() * 4; i++) {
                    entry += chaosThoughts[Math.floor(Math.random() * chaosThoughts.length)];
                    if (i % 3 === 0) entry += "\n\n";
                }
            } else {
                entry += "keeps pulling at my brain like a splinter under my fingernail that I can't dig out. Can't shake this feeling that everything's connected - the way that guy looked at me outside the grocery store, the number on the bus that matched my birthday, the song that keeps playing on three different radio stations. It's all part of something bigger, something they definitely don't want us to see. ";
                
                // Add more coherent but lengthy thoughts for mild intensity
                const moreThoughts = [
                    "Been noticing things lately. Small things that don't make sense until you put them together. The way certain people appear in multiple places throughout my day, like they're following a script. The way conversations stop when I walk by, then resume in whispers. ",
                    "The internet knows too much about us. Predicts what we'll buy before we know we want it, who we'll vote for before we decide, who we'll fall in love with before we meet them. That's not algorithms, that's something else entirely. ",
                    "Weather's been strange lately. Too convenient. Rain exactly when they need distractions from the real news, sunshine when they want consumer confidence up, hurricanes timed perfectly with election cycles. Nature doesn't work on a schedule like that. ",
                    "Financial markets move like someone's pulling invisible strings. Crashes happen right before major policy announcements, wealth transfers upward while everyone's distracted by social media drama. The timing's too perfect to be coincidence. ",
                    "Food tastes different now. Processed stuff has this metallic aftertaste that wasn't there five years ago. Makes you wonder what they're adding that's not on the ingredient list. Population control through the food supply, slow and subtle. ",
                    "Sleep patterns are off for everyone I know. People waking up at 3 AM for no reason, all having the same types of dreams. Electromagnetic frequency manipulation through cell towers, testing how much they can influence our subconscious minds. "
                ];
                
                for (let i = 0; i < 3 + Math.random() * 2; i++) {
                    entry += moreThoughts[Math.floor(Math.random() * moreThoughts.length)];
                }
            }
            
            // Callback to previous entries (longer section)
            if (useCallbacks && pastObsessions.length > 0 && Math.random() > 0.4) {
                const obsession = pastObsessions[Math.floor(Math.random() * pastObsessions.length)];
                const callbackIntros = [
                    "Reminds me of that thing about " + obsession + " I was thinking about before. Same energy, same pattern repeating itself. ",
                    "Just like when I was obsessing over " + obsession + " last week. It all comes back to the same central truth they're hiding. ",
                    "Connected to " + obsession + " somehow. Everything's connected if you trace it back far enough to the source. "
                ];
                entry += callbackIntros[Math.floor(Math.random() * callbackIntros.length)];
            }
            
            // Multiple philosophy endings for length
            const philosophyBits = [
                "Reality's just consensus hallucination anyway. We all agree the sky is blue so it becomes blue in our shared delusion. ",
                "Time moves backwards when nobody's watching. Past keeps changing to match what they need the present to look like. ",
                "Maybe we're all just ghosts pretending to be alive, going through the motions because we forgot we already died. ",
                "The universe is having an argument with itself and we're caught in the crossfire of cosmic cognitive dissonance. "
            ];
            
            entry += "\n\n" + philosophyBits[Math.floor(Math.random() * philosophyBits.length)];
            
            const endings = [
                "Tomorrow I'm gonna dig deeper into this rabbit hole and see how far it really goes.",
                "But the real question is: how many people know the truth and just stay quiet to protect themselves?",
                "Something big is coming. I can feel it in the air, taste it in the water, see it in people's eyes.",
                "The pattern's getting clearer every day. Soon I'll have enough pieces to see the whole picture.",
                "They can't keep this hidden forever. Truth has a way of surfacing when you least expect it."
            ];
            
            entry += " " + endings[Math.floor(Math.random() * endings.length)];
            
            // Track more obsessions for richer callbacks
            const sentences = entry.split('.');
            sentences.forEach(sentence => {
                const words = sentence.toLowerCase().split(' ');
                const importantWords = words.filter(word => word.length > 5 && !['because', 'through', 'before', 'always', 'people', 'really', 'something', 'nothing'].includes(word));
                if (importantWords.length > 0) {
                    const newObsession = importantWords[Math.floor(Math.random() * importantWords.length)];
                    if (!pastObsessions.includes(newObsession)) {
                        pastObsessions.push(newObsession);
                        if (pastObsessions.length > 20) {
                            pastObsessions.shift();
                        }
                    }
                }
            });
            
            return entry;
        }
        
        function updateDisplay(entry) {
            document.getElementById('entryCounter').textContent = 'Entry #' + entryCount;
            document.getElementById('storyText').textContent = entry;
            
            const words = entry.split(' ').length;
            const readTime = Math.ceil(words / 3.5);
            document.getElementById('wordCount').textContent = 'Words: ' + words + ' | Read time: ~' + readTime + ' seconds';
        }
        
        function copyText() {
            const text = document.getElementById('storyText').textContent;
            navigator.clipboard.writeText(text).then(() => alert('Copied!'));
        }
        
        function downloadEntry() {
            const text = document.getElementById('storyText').textContent;
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'diary-entry-' + entryCount + '.txt';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function downloadFullStory() {
            const fullText = allEntries.map((entry, i) => 'ENTRY #' + (i + 1) + '\n' + entry + '\n\n---\n\n').join('');
            const blob = new Blob([fullText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'complete-novel.txt';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function saveProgress() {
            const saveData = {
                entryCount: entryCount,
                allEntries: allEntries,
                pastObsessions: pastObsessions
            };
            localStorage.setItem('narratorProgress', JSON.stringify(saveData));
            alert('Progress saved!');
        }
        
        function loadProgress() {
            const saved = localStorage.getItem('narratorProgress');
            if (saved) {
                const data = JSON.parse(saved);
                entryCount = data.entryCount;
                allEntries = data.allEntries;
                pastObsessions = data.pastObsessions || [];
                
                if (allEntries.length > 0) {
                    updateDisplay(allEntries[allEntries.length - 1]);
                }
                alert('Progress loaded!');
            } else {
                alert('No saved progress found!');
            }
        }
        
        function resetStory() {
            if (confirm('Reset all progress? This cannot be undone.')) {
                entryCount = 0;
                allEntries = [];
                pastObsessions = [];
                document.getElementById('entryCounter').textContent = 'Entry #1';
                document.getElementById('storyText').textContent = 'Click "GENERATE ENTRY" to begin the endless novel... the mind is waiting to spill its thoughts...';
                document.getElementById('wordCount').textContent = 'Words: 0 | Target: 200-250 words (60 seconds)';
            }
        }
    </script>
</body>
</html>
