<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Convergence - AI Novel Builder</title>
    <style>
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #1a1a1a;
            border: 3px solid #ffffff;
            padding: 40px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
        }
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        .subtitle {
            text-align: center;
            font-style: italic;
            color: #999;
            margin-bottom: 30px;
        }
        .workflow {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        .panel {
            border: 2px solid #ffffff;
            padding: 25px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }
        .panel-title {
            font-size: 1.3em;
            color: #ffffff;
            margin-bottom: 20px;
            font-weight: bold;
            text-align: center;
        }
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .control-full {
            grid-column: span 2;
        }
        .control-group {
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #ffffff;
            font-size: 0.9em;
        }
        select, textarea {
            padding: 10px;
            border: 2px solid #ffffff;
            background: #0a0a0a;
            color: #e0e0e0;
            font-family: 'Georgia', serif;
            cursor: pointer;
            border-radius: 4px;
        }
        textarea {
            min-height: 80px;
            resize: vertical;
            font-size: 0.95em;
        }
        textarea::placeholder {
            color: #555;
        }
        .prompt-display {
            background: #0a0a0a;
            border: 2px solid #ffffff;
            padding: 20px;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
        }
        .episode-input {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #ffffff;
            background: #0a0a0a;
            color: #e0e0e0;
            font-family: 'Georgia', serif;
            font-size: 1em;
            resize: vertical;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .btn {
            padding: 15px;
            font-size: 1.1em;
            background: #ffffff;
            color: #000000;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            border-radius: 4px;
        }
        .btn:hover {
            background: #cccccc;
        }
        .btn-secondary {
            background: #1a1a1a;
            color: #e0e0e0;
            border: 2px solid #ffffff;
        }
        .btn-secondary:hover {
            background: #ffffff;
            color: #000000;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #ffffff;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 1.4em;
            color: #ffffff;
            font-weight: bold;
        }
        .stat-label {
            font-size: 0.8em;
            color: #999;
        }
        .actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
        }
        .actions button {
            padding: 12px;
            background: #1a1a1a;
            color: #e0e0e0;
            border: 2px solid #ffffff;
            cursor: pointer;
        }
        .actions button:hover {
            background: #ffffff;
            color: #000000;
        }
        .blog-feed {
            margin-top: 30px;
        }
        .episode-card {
            border: 3px solid #ffffff;
            padding: 30px;
            margin: 20px 0;
            background: #0a0a0a;
            position: relative;
            animation: slideIn 0.5s ease;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .episode-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ffffff;
        }
        .episode-title {
            font-size: 1.5em;
            color: #ffffff;
            font-weight: bold;
        }
        .episode-meta {
            text-align: right;
            font-size: 0.9em;
            color: #999;
        }
        .episode-notes {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            margin-bottom: 15px;
            border-left: 4px solid #ffffff;
            font-size: 0.95em;
            color: #ccc;
            font-style: italic;
        }
        .episode-notes::before {
            content: "üìù Story Notes: ";
            font-weight: bold;
            color: #ffffff;
            font-style: normal;
        }
        .episode-text {
            font-size: 1.15em;
            line-height: 1.8;
            white-space: pre-wrap;
        }
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 15px;
            background: #ffffff;
            color: #000000;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
        }
        .copy-btn:hover {
            background: #cccccc;
        }
        .placeholder {
            text-align: center;
            padding: 60px;
            color: #777;
            font-style: italic;
        }
        .instruction {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #ffffff;
            font-size: 0.9em;
            color: #ccc;
        }
        .step-number {
            display: inline-block;
            background: #ffffff;
            color: #000000;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-weight: bold;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéôÔ∏è THE CONVERGENCE</h1>
        <div class="subtitle">AI-Powered Novel Builder - Use with Claude or ChatGPT</div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="episodeNum">0</div>
                <div class="stat-label">Episodes</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalWords">0</div>
                <div class="stat-label">Total Words</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalTime">0:00</div>
                <div class="stat-label">Total Time</div>
            </div>
        </div>
        
        <div class="workflow">
            <div class="panel">
                <div class="panel-title">STEP 1: Generate AI Prompt</div>
                
                <div class="instruction">
                    <span class="step-number">1</span>Configure your episode settings below
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <label for="povSelector">Character POV:</label>
                        <select id="povSelector">
                            <option value="detective">Marcus Kane - Detective</option>
                            <option value="hacker">Zara Chen - Hacker</option>
                            <option value="outlaw">Silas Crow - Outlaw</option>
                            <option value="patient">Dr. Emma Cross - Psychologist</option>
                            <option value="psycho">Vic "The Animal" Russo - Psycho</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="lengthSelector">Target Length:</label>
                        <select id="lengthSelector">
                            <option value="180">1 Minute (~180 words)</option>
                            <option value="360">2 Minutes (~360 words)</option>
                            <option value="540" selected>3 Minutes (~540 words)</option>
                            <option value="720">4 Minutes (~720 words)</option>
                            <option value="900">5 Minutes (~900 words)</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="intensitySelector">Intensity:</label>
                        <select id="intensitySelector">
                            <option value="calm">Calm Discovery</option>
                            <option value="tense">Tense Paranoia</option>
                            <option value="manic">Manic Breakdown</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="continuitySelector">Story Continuity:</label>
                        <select id="continuitySelector">
                            <option value="yes">Yes - Reference past episodes</option>
                            <option value="no">No - Fresh start</option>
                        </select>
                    </div>
                    
                    <div class="control-group control-full">
                        <label for="storyNotes">Story Direction (optional):</label>
                        <textarea id="storyNotes" placeholder="Enter specific plot points, events, or directions for this episode..."></textarea>
                    </div>
                </div>
                
                <button class="btn" onclick="generatePrompt()" style="width: 100%; margin-bottom: 15px;">üìù GENERATE PROMPT</button>
                
                <div class="instruction">
                    <span class="step-number">2</span>Copy the prompt below
                </div>
                
                <div class="prompt-display" id="promptDisplay">Click "GENERATE PROMPT" to create your AI prompt...</div>
                
                <button class="btn btn-secondary" onclick="copyPrompt()" style="width: 100%;">üìã COPY PROMPT</button>
            </div>
            
            <div class="panel">
                <div class="panel-title">STEP 2: Get AI Response</div>
                
                <div class="instruction">
                    <span class="step-number">3</span>Paste prompt into Claude or ChatGPT
                </div>
                
                <div class="instruction">
                    <span class="step-number">4</span>Copy AI's response and paste below
                </div>
                
                <textarea class="episode-input" id="episodeInput" placeholder="Paste the AI-generated episode text here..."></textarea>
                
                <button class="btn" onclick="saveEpisode()" style="width: 100%; margin-top: 15px;">üíæ SAVE EPISODE</button>
            </div>
        </div>
        
        <div class="actions">
            <button onclick="copyAll()">Copy All Episodes</button>
            <button onclick="downloadAll()">Download All</button>
            <button onclick="reset()">Reset Story</button>
        </div>
        
        <div class="blog-feed" id="blogFeed">
            <div class="placeholder">Generate a prompt and save your first episode to begin...</div>
        </div>
    </div>

    <script>
        let episodeCount = 0;
        let allEpisodes = [];
        
        const characters = {
            detective: {
                name: "Marcus Kane",
                role: "Detective",
                intro: "My name is Marcus Kane. I'm a detective in a city that's rotting from the inside out.",
                voice: "Hardboiled detective noir - cynical, observant, world-weary but determined. Think classic film noir meets supernatural mystery.",
                themes: "Reality glitches, impossible crime scenes, the symbol (circle within a circle), Site Seventeen, the woman in red, temporal anomalies in evidence"
            },
            hacker: {
                name: "Zara Chen",
                role: "Hacker",
                intro: "I'm Zara Chen. I see code where others see reality, and lately the code is breaking.",
                voice: "Tech-savvy, cerebral, slightly paranoid. Speaks in metaphors mixing digital and physical reality. Fast-paced internal monologue.",
                themes: "The Echo Protocol, corrupted data, impossible AI, neural implants, timeline data, ghost servers, reality as buggy software, Obsidian Key Corporation"
            },
            outlaw: {
                name: "Silas Crow",
                role: "Outlaw",
                intro: "They call me Silas Crow. This frontier has ghosts, and I'm starting to think I'm one of them.",
                voice: "Western/frontier style - laconic, poetic in a rough way, contemplative about death and time. Weathered storyteller.",
                themes: "The cursed gun, time loops, the ghost town that moves locations, temporal frontier, stars in wrong constellations, dying before dying"
            },
            patient: {
                name: "Dr. Emma Cross",
                role: "Psychologist",
                intro: "Dr. Emma Cross. Psychologist. But my patients are describing memories that can't exist.",
                voice: "Clinical but increasingly unsettled. Professional detachment breaking down. Precise, analytical, questioning her own sanity.",
                themes: "Shared nightmares, therapy session loops, impossible prescriptions, her own patient file from the future, memories bleeding between patient and doctor, the black door"
            },
            psycho: {
                name: "Vic 'The Animal' Russo",
                role: "Conspiracy Theorist",
                intro: "Vic Russo. They call me The Animal. I see what you sheep can't see.",
                voice: "Manic, unhinged conspiracy theorist - rapid-fire connections, paranoid intensity, mix of actual insight and delusion. Aggressive truth-seeker.",
                themes: "Chemtrails, fluoride, MK-Ultra, D.U.M.B.s, Mandela Effect, CERN, reptilians, time loop awareness, reality manipulation, shadow government"
            }
        };
        
        function generatePrompt() {
            const pov = document.getElementById('povSelector').value;
            const targetWords = parseInt(document.getElementById('lengthSelector').value);
            const intensity = document.getElementById('intensitySelector').value;
            const continuity = document.getElementById('continuitySelector').value;
            const notes = document.getElementById('storyNotes').value.trim();
            
            const char = characters[pov];
            const nextEpisodeNum = episodeCount + 1;
            
            let prompt = `Write Episode #${nextEpisodeNum} of "The Convergence" - a psychological thriller about reality, time loops, and converging timelines.

CHARACTER: ${char.name} (${char.role})
VOICE/STYLE: ${char.voice}
TARGET LENGTH: Exactly ${targetWords} words (count carefully - this is for a ${targetWords/180}-minute voice-over)
INTENSITY: ${intensity.charAt(0).toUpperCase() + intensity.slice(1)}

CHARACTER INTRO:
${episodeCount === 0 ? `Start with: "${char.intro}"` : `Begin with: "This is ${char.name}." or similar brief reintroduction.`}

RECURRING THEMES FOR THIS CHARACTER:
${char.themes}

`;

            if (continuity === 'yes' && allEpisodes.length > 0) {
                prompt += `STORY CONTINUITY:
This is episode ${nextEpisodeNum}. Here's what has happened in previous episodes (brief summary):

`;
                const recentEpisodes = allEpisodes.slice(0, Math.min(3, allEpisodes.length));
                recentEpisodes.forEach(ep => {
                    prompt += `- Episode ${ep.number} (${ep.character}): ${ep.text.substring(0, 150)}...\n`;
                });
                
                prompt += `\nBuild on these events naturally. Reference past discoveries or revelations when relevant, but introduce NEW developments and mysteries.\n\n`;
            }

            if (notes) {
                prompt += `SPECIFIC DIRECTIONS FOR THIS EPISODE:
${notes}

`;
            }

            prompt += `WRITING REQUIREMENTS:
1. Write EXACTLY ${targetWords} words (¬±10 words). This is critical for voice-over timing.
2. First-person POV in ${char.name}'s distinctive voice
3. Focus on atmosphere, mystery, and psychological tension
4. Include specific, vivid details and imagery
5. Build to a compelling cliffhanger or revelation
6. The story involves: time loops, reality manipulation, The Echo Protocol (a secret project), Site Seventeen (mysterious convergence point), and timelines collapsing into one
7. ${intensity === 'manic' ? 'Escalate paranoia and intensity - fragments of realization, reality breaking down visibly' : intensity === 'tense' ? 'Maintain constant unease - things are wrong but not yet clear how wrong' : 'Keep measured discovery - strange but investigating methodically'}
8. Each episode should reveal something new while deepening the mystery
9. Use sensory details - what they see, hear, feel
10. End with a hook that demands the next episode

OUTPUT FORMAT:
Write only the episode text - no titles, no "Episode #" header, just the voice-over narrative from ${char.name}'s perspective. Make it feel like a radio drama or podcast monologue.

Begin writing now:`;

            document.getElementById('promptDisplay').textContent = prompt;
        }
        
        function copyPrompt() {
            const prompt = document.getElementById('promptDisplay').textContent;
            if (prompt === "Click \"GENERATE PROMPT\" to create your AI prompt...") {
                alert('‚ö†Ô∏è Generate a prompt first!');
                return;
            }
            navigator.clipboard.writeText(prompt).then(() => {
                alert('üìã Prompt copied! Paste it into Claude or ChatGPT.');
            });
        }
        
        function saveEpisode() {
            const text = document.getElementById('episodeInput').value.trim();
            if (!text) {
                alert('‚ö†Ô∏è Please paste the AI-generated episode first!');
                return;
            }
            
            episodeCount++;
            const pov = document.getElementById('povSelector').value;
            const notes = document.getElementById('storyNotes').value.trim();
            const char = characters[pov];
            
            const episode = {
                number: episodeCount,
                pov: pov,
                character: char.name,
                text: text,
                words: text.split(' ').length,
                timestamp: new Date().toLocaleString(),
                notes: notes
            };
            
            allEpisodes.unshift(episode);
            displayEpisode(episode);
            updateStats();
            
            // Clear inputs
            document.getElementById('episodeInput').value = '';
            document.getElementById('storyNotes').value = '';
            
            alert(`‚úÖ Episode #${episodeCount} saved!`);
        }
        
        function displayEpisode(episode) {
            const feed = document.getElementById('blogFeed');
            if (feed.querySelector('.placeholder')) {
                feed.innerHTML = '';
            }
            
            const notesHTML = episode.notes ? `<div class="episode-notes">${episode.notes}</div>` : '';
            
            const card = document.createElement('div');
            card.className = 'episode-card';
            card.innerHTML = `
                <button class="copy-btn" onclick="copyEpisode(${episode.number})">üìã COPY</button>
                <div class="episode-header">
                    <div class="episode-title">Episode #${episode.number}: ${episode.character}</div>
                    <div class="episode-meta">
                        ${episode.words} words | ${Math.floor(episode.words / 180)}:${String(Math.floor(((episode.words / 180) % 1) * 60)).padStart(2, '0')} min<br>
                        ${episode.timestamp}
                    </div>
                </div>
                ${notesHTML}
                <div class="episode-text">${episode.text}</div>
            `;
            
            feed.insertBefore(card, feed.firstChild);
        }
        
        function updateStats() {
            document.getElementById('episodeNum').textContent = episodeCount;
            
            const totalWords = allEpisodes.reduce((sum, ep) => sum + ep.words, 0);
            document.getElementById('totalWords').textContent = totalWords;
            
            const totalMinutes = Math.floor(totalWords / 180);
            const totalSeconds = Math.floor(((totalWords / 180) % 1) * 60);
            document.getElementById('totalTime').textContent = `${totalMinutes}:${String(totalSeconds).padStart(2, '0')}`;
        }
        
        function copyEpisode(num) {
            const episode = allEpisodes.find(ep => ep.number === num);
            if (episode) {
                const notesSection = episode.notes ? `Story Notes: ${episode.notes}\n\n` : '';
                const text = `${notesSection}${episode.text}`;
                navigator.clipboard.writeText(text).then(() => alert('üìã Episode copied!'));
            }
        }
        
        function copyAll() {
            if (allEpisodes.length === 0) {
                alert('‚ö†Ô∏è No episodes to copy!');
                return;
            }
            const full = allEpisodes.reverse().map(ep => {
                const notesSection = ep.notes ? `Story Notes: ${ep.notes}\n\n` : '';
                return `EPISODE ${ep.number}\n${ep.character}\n${ep.timestamp}\n\n${notesSection}${ep.text}\n\n${'='.repeat(80)}\n\n`;
            }).join('');
            allEpisodes.reverse();
            navigator.clipboard.writeText(full).then(() => alert('üìã All episodes copied!'));
        }
        
        function downloadAll() {
            if (allEpisodes.length === 0) {
                alert('‚ö†Ô∏è No episodes to download!');
                return;
            }
            const full = allEpisodes.reverse().map(ep => {
                const notesSection = ep.notes ? `Story Notes: ${ep.notes}\n\n` : '';
                return `EPISODE ${ep.number}\n${ep.character}\n${ep.timestamp}\n\n${notesSection}${ep.text}\n\n${'='.repeat(80)}\n\n`;
            }).join('');
            allEpisodes.reverse();
            const blob = new Blob([full], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'the-convergence-complete.txt';
            a.click();
        }
        
        function reset() {
            if (confirm('Reset entire story? This cannot be undone.')) {
                episodeCount = 0;
                allEpisodes = [];
                document.getElementById('blogFeed').innerHTML = '<div class="placeholder">Generate a prompt and save your first episode to begin...</div>';
                document.getElementById('episodeInput').value = '';
                document.getElementById('storyNotes').value = '';
                document.getElementById('promptDisplay').textContent = 'Click "GENERATE PROMPT" to create your AI prompt...';
                updateStats();
            }
        }
    </script>
</body>
</html>
