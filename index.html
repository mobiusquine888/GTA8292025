<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTAFastLane - Ultimate GTA 6 Countdown Hub</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÆ</text></svg>">
    
    <style>
        #beta-banner-close, #disclaimer-banner-close {
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
            color: #ffcc00;
            text-shadow: 0 0 6px rgba(255, 204, 0, 0.8);
            padding: 4px 8px;
        }
        
        #beta-banner-close:hover, #disclaimer-banner-close:hover {
            color: #ffffff;
        }

        #feedbackBtnGlow {
            border: none;
            background: #ff0055;
            color: white;
            padding: .45rem .9rem;
            border-radius: .4rem;
            cursor: pointer;
            font-weight: bold;
            text-shadow: 0 0 4px rgba(0,0,0,0.7);
            box-shadow: 0 0 10px #ff0055, 0 0 20px #ff0055;
            animation: neonPulse 1.8s infinite alternate;
        }
        
        @keyframes neonPulse {
            from { 
                box-shadow: 0 0 6px #ff0055, 0 0 12px #ff0055, 0 0 20px #ff0055; 
                transform: scale(1);
            }
            to { 
                box-shadow: 0 0 12px #ff0055, 0 0 24px #ff0055, 0 0 36px #ff0055; 
                transform: scale(1.05);
            }
        }

        :root {
            --primary-color: #00ffa2;
            --secondary-color: #ff007c;
            --accent-color: #8a2be2;
            --gold-color: #ffd700;
            --premium-color: #ff6b35;
            --success-color: #2ed573;
            --warning-color: #ffa502;
            --danger-color: #ff4757;
            --text-color: #f5f5f5;
            --bg-color: #0a0a0a;
            --card-bg: #1a1a1a;
            --border-color: #2a2a2a;
            --shadow: 0 4px 25px rgba(0,0,0,0.8);
            --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            --gradient-premium: linear-gradient(135deg, var(--gold-color) 0%, var(--premium-color) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: #0a0a0a;
            color: var(--text-color);
            min-height: 100vh;
            padding-bottom: 70px;
        }

        /* General text readability improvements */
        h1, h2, h3, h4, h5, h6 {
            text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
        }

        p, span, div, button {
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }

        body.night-mode {
            --primary-color: #00d4ff !important;
            --secondary-color: #00d4ff !important;
            --text-color: #ffffff !important;
            --bg-color: #000000 !important;
            --card-bg: #111111 !important;
            --border-color: #333333 !important;
            --gradient-primary: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%) !important;
            background: #000000 !important;
        }

        body.night-mode .header {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%) !important;
        }

        body.night-mode h1,
        body.night-mode h2,
        body.night-mode h3,
        body.night-mode h4,
        body.night-mode p,
        body.night-mode span,
        body.night-mode div {
            color: #ffffff !important;
        }

        body.night-mode .stat-card,
        body.night-mode .news-item,
        body.night-mode .video-card {
            background: #1a1a1a !important;
            border: 1px solid #333333 !important;
        }

        body.night-mode .countdown-item {
            background: rgba(255,255,255,0.1) !important;
            border: 1px solid rgba(255,255,255,0.2) !important;
        }

        body.night-mode .tab-btn {
            background: #1a1a1a !important;
            color: #ffffff !important;
        }

        body.night-mode .tab-btn.active {
            background: linear-gradient(135deg, #00d4ff 0%, #0088ff 100%) !important;
            color: #000000 !important;
        }

        .header {
            background: var(--gradient-primary);
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .header.minimal {
            padding: 0.5rem 1rem;
        }

        .header.minimal .user-status-container,
        .header.minimal .action-buttons,
        .header.minimal .live-activity,
        .header.minimal .countdown-container,
        .header.minimal .achievement-showcase,
        .header.minimal .trailer-link {
            display: none;
        }

        .header.minimal h1 {
            font-size: 1.5rem;
            margin: 0;
        }

        .header h1 {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            margin-bottom: 0.5rem;
            font-weight: 900;
            cursor: pointer;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 10px rgba(255,255,255,0.1); }
            to { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.3); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .user-status-container {
            position: absolute;
            top: 4rem;
            left: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .user-status {
            background: rgba(255,255,255,0.25);
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .action-buttons {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            flex-direction: column;
        }

        .action-btn {
            background: rgba(255,255,255,0.3);
            border: 2px solid rgba(255,255,255,0.5);
            color: white;
            padding: 0.75rem;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .action-btn:hover {
            background: rgba(255,255,255,0.5);
            transform: scale(1.1);
        }

        .countdown-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.5rem;
            margin: 1rem 0;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 1rem;
        }

        .countdown-item {
            background: rgba(255,255,255,0.15);
            border-radius: 12px;
            padding: 1rem 0.5rem;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .countdown-item:hover {
            transform: scale(1.05);
            background: rgba(255,255,255,0.25);
        }

        .countdown-number {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 900;
            color: white;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 15px rgba(0,0,0,0.5);
            display: block;
        }

        .countdown-label {
            font-size: clamp(0.7rem, 2vw, 0.9rem);
            margin-top: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.9;
            font-weight: 600;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
        }

        .live-activity {
            background: rgba(46, 213, 115, 0.1);
            border: 1px solid var(--success-color);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--success-color);
            margin: 0.5rem auto;
            max-width: 400px;
        }

        .achievement-showcase {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
            flex-wrap: wrap;
        }

        .achievement {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-premium);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .achievement:hover {
            transform: scale(1.2);
        }

        .achievement.locked {
            background: rgba(255,255,255,0.1);
            opacity: 0.3;
        }

        .tabs-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-top: 2px solid var(--border-color);
            z-index: 1000;
            box-shadow: 0 -4px 25px rgba(0,0,0,0.3);
        }

        .tabs {
            display: flex;
            justify-content: space-around;
            padding: 0.5rem 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        .tab {
            background: transparent;
            border: none;
            color: var(--text-color);
            padding: 0.3rem 0.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.15rem;
            min-width: 36px;
            flex: 1;
            opacity: 0.7;
        }

        .tab:hover {
            opacity: 1;
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            opacity: 1;
        }

        .tab .tab-icon {
            font-size: 1rem;
            display: block;
        }

        .tab .tab-label {
            font-size: 0.45rem;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .content-area {
            padding: 1rem 1rem 170px 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .viral-challenge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            text-align: center;
            color: white;
        }

        .referral-system {
            background: var(--gradient-primary);
            color: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border-top: 4px solid var(--primary-color);
            cursor: pointer;
        }

        .stat-card:hover {
            transform: translateY(-3px) scale(1.02);
        }

        .stat-card.premium {
            border-top-color: var(--gold-color);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(255, 107, 53, 0.05));
        }

        .stat-number {
            font-size: clamp(1.5rem, 4vw, 2rem);
            font-weight: 800;
            color: var(--primary-color);
            display: block;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.6);
        }

        .stat-card.premium .stat-number {
            color: var(--gold-color);
        }

        .news-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,255,162,0.3);
        }

        .news-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .news-card:hover img {
            transform: scale(1.05);
        }

        .floating-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 20px;
            cursor: pointer;
            box-shadow: var(--shadow);
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .floating-btn:hover {
            transform: scale(1.1);
        }

        .floating-btn.premium {
            background: var(--gradient-premium);
        }

        .floating-actions {
            position: fixed;
            bottom: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 1000;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-primary);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            z-index: 10000;
            display: none;
            max-width: calc(100vw - 40px);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .user-status-container,
            .action-buttons {
                position: static;
                margin: 0.5rem 0;
            }

            .action-buttons {
                flex-direction: row;
                justify-content: center;
            }

            .countdown-container {
                grid-template-columns: repeat(4, 1fr);
                gap: 0.3rem;
                padding: 0 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div id="beta-banner" style="position: fixed; top: 0; left: 0; right: 0; z-index: 99999; display: none; background: rgba(20, 20, 20, 0.97); color: #f0f0f0; border-bottom: 2px solid #ff0055; font-family: 'Trebuchet MS', sans-serif; transform: translateY(-100%); opacity: 0; transition: transform 0.6s ease, opacity 0.6s ease;">
      <div style="max-width: 1100px; margin: 0 auto; padding: 1rem; display: flex; align-items: center; gap:.75rem; justify-content: space-between;">
        <div style="display:flex; align-items:center; gap:.6rem; font-size: 1rem;">
          <span style="font-size: 1.2rem; color:#ff0055;">‚ö†Ô∏è</span>
          <strong style="color:#ffcc00;">Beta version ‚Äì we're testing!</strong>
          <span>Feedback appreciated.</span>
        </div>
        <div style="display:flex; align-items:center; gap:.5rem;">
          <button id="feedbackBtnGlow" onclick="document.getElementById('feedbackBtn').click()">Give Feedback</button>
          <button id="beta-banner-close">‚úï</button>
        </div>
      </div>
    </div>

    <header class="header">
        <div class="user-status-container">
            <div class="user-status">
                <span id="userLevel">Insider</span>
            </div>
            <div class="user-status">
                XP: <span id="userXP">1,247</span> | Coins: <span id="userCoins">850</span>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn" onclick="toggleTheme()" id="themeToggle" title="Toggle Theme">üåô</button>
            <button class="action-btn" onclick="showNotification('Achievements coming soon!')" title="Achievements">üèÜ</button>
            <button class="action-btn" onclick="showNotification('Notifications coming soon!')" title="Notifications">üîî</button>
            <button class="action-btn" onclick="showNotification('Wallet coming soon!')" title="Wallet">üí∞</button>
        </div>
        
        <button style="background: var(--gradient-primary); color: white; border: none; border-radius: 50%; width: 100px; height: 100px; cursor: pointer; box-shadow: var(--shadow); font-size: 2.5rem; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; position: fixed; bottom: 80px; left: 20px; z-index: 1000;" onclick="showTab('challenges')" title="Mini-Games">üéØ</button>
        
        <h1 onclick="showNotification('Easter egg activated!')">üéÆ GTAFastLane</h1>
        
        <div class="live-activity" id="liveActivity">
            üî¥ LIVE: <span id="onlineCount">12,847</span> fans online | Limited event active!
        </div>
        
        <div class="trailer-link" style="max-width: 600px; margin: 1rem auto; position: relative;">
            <div id="trailerPreview" style="position: relative; aspect-ratio: 16/9; overflow: hidden; border-radius: 12px; cursor: pointer; transition: transform 0.3s ease;">
                <div style="position: absolute; inset: 0; background: linear-gradient(45deg, #FF6B6B 0%, #4ECDC4 25%, #45B7D1 50%, #96CEB4 75%, #FFEAA7 100%); display: flex; align-items: center; justify-content: center;">
                    <div style="text-align: center; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); z-index: 2;">
                        <div style="font-family: 'Montserrat', sans-serif; font-size: clamp(1.2rem, 3vw, 2.5rem); font-weight: 900; margin-bottom: 0.5rem; letter-spacing: 2px;">GRAND THEFT AUTO</div>
                        <div style="font-size: clamp(2rem, 5vw, 4rem); font-weight: 900; margin-bottom: 0.5rem;">VI</div>
                        <div style="font-size: clamp(0.8rem, 2vw, 1.2rem); opacity: 0.9; font-weight: 600;">SPRING 2025</div>
                    </div>
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,0,0,0.9); border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; z-index: 10;">‚ñ∂</div>
                </div>
            </div>
            <div id="trailerPlayer" style="display:none; aspect-ratio:16/9; border-radius:12px; overflow:hidden;">
                <iframe width="100%" height="100%" src="https://www.youtube.com/embed/VQRLujxTm3c?autoplay=1" frameborder="0" allow="autoplay" allowfullscreen></iframe>
            </div>
        </div>
        
        <div class="countdown-container">
            <div class="countdown-item" onclick="awardRewards(5, 2, 'Countdown clicked!')">
                <span class="countdown-number" id="days">273</span>
                <div class="countdown-label">Days</div>
            </div>
            <div class="countdown-item" onclick="awardRewards(5, 2, 'Countdown clicked!')">
                <span class="countdown-number" id="hours">15</span>
                <div class="countdown-label">Hours</div>
            </div>
            <div class="countdown-item" onclick="awardRewards(5, 2, 'Countdown clicked!')">
                <span class="countdown-number" id="minutes">42</span>
                <div class="countdown-label">Minutes</div>
            </div>
            <div class="countdown-item" onclick="awardRewards(5, 2, 'Countdown clicked!')">
                <span class="countdown-number" id="seconds">18</span>
                <div class="countdown-label">Seconds</div>
            </div>
        </div>
        
        <div class="achievement-showcase">
            <div class="achievement" title="Early Bird">ü¶Ö</div>
            <div class="achievement" title="Streak Master">üî•</div>
            <div class="achievement locked" title="Prediction King">üëë</div>
            <div class="achievement locked" title="Viral Sharer">üì±</div>
        </div>
    </header>

    <div class="tabs-container">
        <nav class="tabs">
            <button class="tab active" onclick="showTab('home')" data-tab="home">
                <span class="tab-icon">üè†</span>
                <span class="tab-label">Home</span>
            </button>
            <button class="tab" onclick="showTab('news')" data-tab="news">
                <span class="tab-icon">üì∞</span>
                <span class="tab-label">News</span>
            </button>
            <button class="tab" onclick="showTab('youtube')" data-tab="youtube">
                <span class="tab-icon">üì∫</span>
                <span class="tab-label">GTA</span>
            </button>
            <button class="tab" onclick="showTab('trevor')" data-tab="trevor">
                <span class="tab-icon">üòà</span>
                <span class="tab-label">Trevor</span>
            </button>
            <button class="tab" onclick="showTab('rdr2')" data-tab="rdr2">
                <span class="tab-icon">ü§†</span>
                <span class="tab-label">RDR2</span>
            </button>
            <button class="tab" onclick="showTab('challenges')" data-tab="challenges">
                <span class="tab-icon">üéØ</span>
                <span class="tab-label">Games</span>
            </button>
            <button class="tab" onclick="showTab('chat')" data-tab="chat">
                <span class="tab-icon">üí¨</span>
                <span class="tab-label">Chat</span>
            </button>
            <button class="tab" onclick="showTab('rumors')" data-tab="rumors">
                <span class="tab-icon">üî•</span>
                <span class="tab-label">Rumors</span>
            </button>
            <button class="tab" onclick="showTab('theories')" data-tab="theories">
                <span class="tab-icon">üß†</span>
                <span class="tab-label">Theories</span>
            </button>
            <button class="tab" onclick="showTab('shop')" data-tab="shop">
                <span class="tab-icon">üõí</span>
                <span class="tab-label">Shop</span>
            </button>
            <button class="tab premium" onclick="showTab('premium')" data-tab="premium">
                <span class="tab-icon">üëë</span>
                <span class="tab-label">Premium</span>
            </button>
        </nav>
    </div>

    <main class="content-area">
        <div id="home" class="tab-content active">
            <div class="viral-challenge">
                <h2>üöÄ VIRAL CHALLENGE ACTIVE!</h2>
                <p><strong>Share GTAFastLane and earn 500 coins!</strong></p>
                <button class="floating-btn" style="position: static; margin: 1rem auto;" onclick="shareForReward()">üéÅ Share & Earn</button>
            </div>

            <div class="referral-system">
                <h3>üí∞ Refer Friends & Earn</h3>
                <p>Each friend earns you <strong>100 coins + 50 XP</strong></p>
                <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 8px; font-family: monospace; font-size: 1.2rem; margin: 1rem 0; cursor: pointer;" onclick="copyReferralCode()">
                    GTAFL-<span id="userReferralCode">A7B9X2</span>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">52,847</span>
                    <div>Total Members</div>
                </div>
                <div class="stat-card premium">
                    <span class="stat-number">8,234</span>
                    <div>Premium Members</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">1,247</span>
                    <div>Shares Today</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">15,678</span>
                    <div>NFTs Minted</div>
                </div>
            </div>
        </div>

        <div id="news" class="tab-content">
            <h2 style="color: var(--primary-color);">Latest GTA 6 News</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="newsCount">Loading...</span>
                    <div>Stories Today</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="newsWeekly">Loading...</span>
                    <div>This Week</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="newsSources">Loading...</span>
                    <div>News Sources</div>
                </div>
                <div class="stat-card premium">
                    <span class="stat-number">LIVE</span>
                    <div>Status</div>
                </div>
            </div>
            <div id="newsContainer" style="margin-top: 2rem;">
                <div style="text-align: center; padding: 2rem; color: var(--primary-color);">Loading news...</div>
            </div>
        </div>

        <div id="youtube" class="tab-content">
            <h2 style="color: var(--primary-color);">üéÆ GTA 6 Videos</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="ytVideoCount">Loading...</span>
                    <div>Videos Found</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="ytTotalViews">Loading...</span>
                    <div>Total Views</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="ytChannelCount">Loading...</span>
                    <div>Channels</div>
                </div>
                <div class="stat-card premium">
                    <span class="stat-number">LIVE</span>
                    <div>Streaming</div>
                </div>
            </div>
            <div id="youtubeGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-top: 2rem;">
                <div style="text-align: center; padding: 2rem; color: var(--primary-color);">Loading videos...</div>
            </div>
        </div>

        <div id="trevor" class="tab-content">
            <h2 style="color: var(--danger-color);">üòà Trevor Chaos Videos</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="trevorVideoCount">Loading...</span>
                    <div>Videos</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="trevorViews">Loading...</span>
                    <div>Views</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="trevorChannels">Loading...</span>
                    <div>Channels</div>
                </div>
                <div class="stat-card premium">
                    <span class="stat-number">CHAOS</span>
                    <div>Mode</div>
                </div>
            </div>
            <div id="trevorGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-top: 2rem;">
                <div style="text-align: center; padding: 2rem; color: var(--danger-color);">Loading videos...</div>
            </div>
        </div>

        <div id="rdr2" class="tab-content">
            <h2 style="color: var(--primary-color);">ü§† Red Dead Redemption 2</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="rdr2VideoCount">Loading...</span>
                    <div>Videos</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="rdr2Views">Loading...</span>
                    <div>Views</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="rdr2Channels">Loading...</span>
                    <div>Channels</div>
                </div>
                <div class="stat-card premium">
                    <span class="stat-number">WILD</span>
                    <div>West</div>
                </div>
            </div>
            <div id="rdr2Grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-top: 2rem;">
                <div style="text-align: center; padding: 2rem; color: var(--primary-color);">Loading videos...</div>
            </div>
        </div>

        <div id="challenges" class="tab-content">
            <h2 style="color: var(--primary-color);">üéØ Mini-Games</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="challengesCompleted">0</span>
                    <div>Completed</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="currentStreak">0</span>
                    <div>Streak</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalScore">0</span>
                    <div>Score</div>
                </div>
                <div class="stat-card premium">
                    <span class="stat-number">#247</span>
                    <div>Rank</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; margin-top: 2rem;">
                <div style="background: var(--card-bg); border-radius: 12px; padding: 1rem;">
                    <h4>Vice City Memory</h4>
                    <div style="display: flex; justify-content: space-between; margin: 0.5rem 0; font-size: 0.8rem;">
                        <span>Moves: <strong id="memoryMoves">0</strong></span>
                        <span>Time: <strong id="memoryTimer">0:00</strong></span>
                    </div>
                    <div id="memoryGame" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.25rem; margin: 0.5rem 0;"></div>
                    <button class="floating-btn" style="position: static; font-size: 0.8rem; padding: 0.5rem 1rem; width: 100%;" onclick="startMemoryGame()">New Game</button>
                </div>

                <div style="background: var(--card-bg); border-radius: 12px; padding: 1rem;">
                    <h4>GTA Trivia</h4>
                    <p id="triviaQuestion" style="font-size: 0.9rem; margin: 0.5rem 0;">Loading...</p>
                    <div id="triviaOptions" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin: 0.5rem 0;"></div>
                    <div style="text-align: center; font-size: 0.8rem;">Score: <strong id="triviaScore">0</strong></div>
                </div>
            </div>
        </div>

        <div id="chat" class="tab-content">
            <h2 style="color: var(--primary-color);">üí¨ Live Chat</h2>
            <div style="background: var(--card-bg); border-radius: 12px; margin: 1rem 0;">
                <div style="background: var(--gradient-primary); padding: 1rem; color: white;">
                    <strong>Live Chat</strong> - <span>847 online</span>
                </div>
                <div style="height: 300px; overflow-y: auto; padding: 1rem;" id="chatMessages">
                    <div style="padding: 0.5rem; margin: 0.5rem 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                        <div style="color: var(--primary-color); font-weight: 600; font-size: 0.8rem;">GTAFan2024</div>
                        <div>Can't wait for GTA 6!</div>
                    </div>
                </div>
                <div style="display: flex; padding: 1rem; gap: 0.5rem;">
                    <input type="text" id="chatInput" placeholder="Type message..." style="flex: 1; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 20px; background: var(--bg-color); color: var(--text-color);">
                    <button onclick="sendChatMessage()" style="background: var(--gradient-primary); border: none; color: white; padding: 0.75rem 1rem; border-radius: 20px; cursor: pointer;">Send</button>
                </div>
            </div>
        </div>

        <div id="rumors" class="tab-content">
            <h2 style="color: var(--primary-color);">üî• GTA 6 Rumors & Leaks</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">84</span>
                    <div>Active Rumors</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">73%</span>
                    <div>Credibility</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">24h</span>
                    <div>Last Update</div>
                </div>
                <div class="stat-card premium">
                    <span class="stat-number">LIVE</span>
                    <div>Tracking</div>
                </div>
            </div>
            <div style="background: var(--card-bg); border-radius: 12px; padding: 2rem; margin: 2rem 0; text-align: center;">
                <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Latest Rumors</h3>
                <p style="opacity: 0.8;">Rumor tracking and analysis coming soon!</p>
            </div>
        </div>

        <div id="theories" class="tab-content">
            <h2 style="color: var(--primary-color);">üß† Community Theories</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">127</span>
                    <div>Total Theories</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">892</span>
                    <div>Top Votes</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">45</span>
                    <div>Contributors</div>
                </div>
                <div class="stat-card premium">
                    <span class="stat-number">12</span>
                    <div>Badges</div>
                </div>
            </div>
            <div style="background: var(--card-bg); border-radius: 12px; padding: 2rem; margin: 2rem 0; text-align: center;">
                <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Theory Hub</h3>
                <p style="opacity: 0.8;">Community theory system coming soon!</p>
            </div>
        </div>

        <div id="shop" class="tab-content">
            <h2 style="color: var(--primary-color);">üõí GTAFastLane Shop</h2>
            <div style="background: var(--card-bg); border-radius: 12px; padding: 2rem; margin: 2rem 0; text-align: center;">
                <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Merchandise Store</h3>
                <p style="opacity: 0.8;">Shop opening soon! Exclusive GTA 6 merch.</p>
            </div>
        </div>

        <div id="premium" class="tab-content">
            <h2 style="color: var(--gold-color);">üëë Premium Features</h2>
            <div style="background: var(--gradient-premium); border-radius: 12px; padding: 2rem; margin: 2rem 0; text-align: center; color: white;">
                <h3 style="margin-bottom: 1rem;">Upgrade to Premium</h3>
                <p style="opacity: 0.9; margin-bottom: 1rem;">Get exclusive access to insider content, early news, and special features!</p>
                <button class="floating-btn premium" style="position: static; margin: 1rem auto;">Coming Soon</button>
            </div>
        </div>
    </main>

    <div class="notification" id="notification"></div>

    <div class="floating-actions">
        <button class="floating-btn" onclick="shareForReward()">üöÄ Share</button>
    </div>

    <button id="feedbackBtn" style="position: fixed; top: 1rem; left: 1rem; background: #ff9800; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; z-index: 1000;">Feedback</button>

    <div id="feedbackModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 9999; justify-content: center; align-items: center;">
      <div style="background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 700px; position: relative;">
        <span id="closeModal" style="position: absolute; top: 10px; right: 15px; cursor: pointer; font-size: 20px; font-weight: bold; color: #000;">&times;</span>
        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScc_a4ao1LnrS1W3qRWgHem-1p9eCcsNlI_5uTOk_FadloJPg/viewform?embedded=true" width="100%" height="520" frameborder="0"></iframe>
      </div>
    </div>

    <div id="disclaimer-banner" style="position: fixed; bottom: 80px; left: 0; right: 0; z-index: 9999; background: rgba(30, 30, 30, 0.95); color: #f0f0f0; border-top: 2px solid #ff0055; padding: 1rem; text-align: center; display: none; transform: translateY(100%); opacity: 0; transition: transform 0.6s ease, opacity 0.6s ease;">
      <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; flex-wrap: wrap;">
        <span>‚ö†Ô∏è <strong>Disclaimer:</strong> Mock data for testing only.</span>
        <button id="disclaimer-banner-close">‚úï</button>
      </div>
    </div>

    <script>
        const API_CONFIG = {
            news: '9ba601680ecc4958a5d11bcda349941b',
            youtube: 'AIzaSyB1Hx3EJD1N_jyJ01E131pUA3RqZvLNOZU'
        };

        let storage = {};
        
        function safeGetStorage(key, defaultValue) {
            return storage[key] || defaultValue;
        }

        function safeSetStorage(key, value) {
            storage[key] = value;
        }

        function safeGetElement(id) {
            return document.getElementById(id);
        }

        function safeUpdateText(id, text) {
            const el = safeGetElement(id);
            if (el) el.textContent = text;
        }

        let userData = {
            xp: 1247,
            coins: 850,
            level: 'Insider',
            referralCode: 'A7B9X2'
        };

        let challengeStats = {
            completed: 0,
            streak: 0,
            score: 0
        };

        function showNotification(message) {
            const notification = safeGetElement('notification');
            if (notification) {
                notification.textContent = message;
                notification.style.display = 'block';
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }
        }

        function awardRewards(coins, xp, message) {
            userData.coins += coins;
            userData.xp += xp;
            updateUserInterface();
            showNotification(`+${coins} coins, +${xp} XP: ${message}`);
        }

        function updateUserInterface() {
            safeUpdateText('userXP', userData.xp.toLocaleString());
            safeUpdateText('userCoins', userData.coins.toLocaleString());
            safeUpdateText('userLevel', userData.level);
            safeUpdateText('userReferralCode', userData.referralCode);
        }

        function toggleTheme() {
            document.body.classList.toggle('night-mode');
            const isNight = document.body.classList.contains('night-mode');
            const toggle = safeGetElement('themeToggle');
            if (toggle) toggle.textContent = isNight ? '‚òÄÔ∏è' : 'üåô';
            showNotification(isNight ? 'Night mode on' : 'Day mode on');
        }

        function showTab(tabName) {
            const header = document.querySelector('.header');
            if (tabName === 'home') {
                header?.classList.remove('minimal');
            } else {
                header?.classList.add('minimal');
            }
            
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));

            const content = safeGetElement(tabName);
            const tab = document.querySelector(`[data-tab="${tabName}"]`);
            
            if (content) content.classList.add('active');
            if (tab) tab.classList.add('active');

            if (tabName === 'youtube') {
                fetchYouTubeVideos('GTA 6 Grand Theft Auto VI', 'youtubeGrid', 'yt');
            } else if (tabName === 'trevor') {
                fetchYouTubeVideos('Trevor Phillips GTA 5 chaos', 'trevorGrid', 'trevor');
            } else if (tabName === 'rdr2') {
                fetchYouTubeVideos('Red Dead Redemption 2 gameplay', 'rdr2Grid', 'rdr2');
            } else if (tabName === 'news') {
                fetchGTA6News();
            } else if (tabName === 'challenges') {
                initializeChallenges();
            }

            awardRewards(2, 1, `Explored ${tabName}`);
        }

        async function fetchYouTubeVideos(query, containerId, statsPrefix) {
            const container = safeGetElement(containerId);
            if (!container) return;

            container.innerHTML = '<div style="text-align: center; padding: 2rem;"><div style="display: inline-block; width: 20px; height: 20px; border: 2px solid var(--primary-color); border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div></div>';

            try {
                const url = `https://www.googleapis.com/youtube/v3/search?key=${API_CONFIG.youtube}&q=${encodeURIComponent(query)}&part=snippet&type=video&maxResults=50&order=relevance`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.items && data.items.length > 0) {
                    displayYouTubeVideos(data.items, container);
                    updateVideoStats(data.items, statsPrefix);
                    showNotification(`‚úÖ Loaded ${data.items.length} videos!`);
                    awardRewards(20, 5, 'Videos loaded');
                } else {
                    throw new Error('No videos found');
                }
            } catch (error) {
                console.error('YouTube error:', error);
                container.innerHTML = `<div style="text-align: center; padding: 2rem; color: var(--danger-color);">
                    <h3>Unable to load videos</h3>
                    <p>${error.message}</p>
                    <button onclick="fetchYouTubeVideos('${query}', '${containerId}', '${statsPrefix}')" style="background: var(--primary-color); border: none; color: white; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; margin-top: 1rem;">Retry</button>
                </div>`;
            }
        }

        function displayYouTubeVideos(videos, container) {
            container.innerHTML = videos.map(video => {
                const videoId = video.id.videoId;
                const thumbnail = video.snippet.thumbnails.medium?.url || video.snippet.thumbnails.default?.url;
                const title = video.snippet.title;
                const channel = video.snippet.channelTitle;
                const published = new Date(video.snippet.publishedAt);
                const timeAgo = getTimeAgo(published);
                
                return `
                    <div style="background: var(--card-bg); border-radius: 12px; overflow: hidden; cursor: pointer; border: 1px solid var(--border-color); transition: transform 0.3s;" 
                         onclick="window.open('https://youtube.com/watch?v=${videoId}', '_blank')"
                         onmouseover="this.style.transform='translateY(-4px)'"
                         onmouseout="this.style.transform='translateY(0)'">
                        <div style="position: relative; aspect-ratio: 16/9; background: url('${thumbnail}') center/cover;">
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,0,0,0.9); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">‚ñ∂</div>
                        </div>
                        <div style="padding: 1rem;">
                            <h4 style="color: var(--text-color); font-size: 0.9rem; margin-bottom: 0.5rem; line-height: 1.3; height: 2.6em; overflow: hidden;">${title}</h4>
                            <div style="color: var(--primary-color); font-size: 0.8rem;">${channel}</div>
                            <div style="color: rgba(255,255,255,0.6); font-size: 0.7rem;">${timeAgo}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateVideoStats(videos, prefix) {
            const count = videos.length;
            const channels = new Set(videos.map(v => v.snippet.channelTitle)).size;
            const views = Math.floor(Math.random() * 10000000) + 1000000;
            
            if (prefix === 'yt') {
                safeUpdateText('ytVideoCount', count);
                safeUpdateText('ytTotalViews', formatNumber(views));
                safeUpdateText('ytChannelCount', channels);
            } else if (prefix === 'trevor') {
                safeUpdateText('trevorVideoCount', count);
                safeUpdateText('trevorViews', formatNumber(views));
                safeUpdateText('trevorChannels', channels);
            } else if (prefix === 'rdr2') {
                safeUpdateText('rdr2VideoCount', count);
                safeUpdateText('rdr2Views', formatNumber(views));
                safeUpdateText('rdr2Channels', channels);
            }
        }

        const mockNewsArticles = [
            { title: "GTA 6 Release Date Confirmed for Spring 2026", description: "Rockstar Games officially confirms Grand Theft Auto VI launches in Spring 2026.", url: "https://www.rockstargames.com/gta-vi", source: { name: "Rockstar Games" }, publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=800&h=450&fit=crop" },
            { title: "Vice City Returns: What We Know About GTA 6's Setting", description: "A return to Vice City confirmed with massive open world spanning multiple cities.", url: "https://www.ign.com/gta6", source: { name: "IGN" }, publishedAt: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1514565131-fce0801e5785?w=800&h=450&fit=crop" },
            { title: "GTA 6 Features Two Playable Protagonists", description: "Players control two main characters including the series' first female protagonist.", url: "https://www.gamespot.com/gta6", source: { name: "GameSpot" }, publishedAt: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=800&h=450&fit=crop" },
            { title: "Next-Gen Graphics: GTA 6 Pushes Technical Boundaries", description: "RAGE engine completely overhauled promising unprecedented visual fidelity.", url: "https://www.eurogamer.net/gta6", source: { name: "Eurogamer" }, publishedAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=800&h=450&fit=crop" },
            { title: "GTA 6 Online Mode Details Emerge", description: "Online component features seamless single-player to multiplayer transitions.", url: "https://www.polygon.com/gta6", source: { name: "Polygon" }, publishedAt: new Date(Date.now() - 18 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=800&h=450&fit=crop" },
            { title: "Pre-Order Information Coming Soon", description: "Rockstar announces pre-order details will be revealed in coming months.", url: "https://www.rockstargames.com/gta-vi", source: { name: "Rockstar Games" }, publishedAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?w=800&h=450&fit=crop" },
            { title: "GTA 6 Map Size Reportedly Largest in Series", description: "Map could be significantly larger than GTA V with more diverse environments.", url: "https://www.kotaku.com/gta6", source: { name: "Kotaku" }, publishedAt: new Date(Date.now() - 30 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?w=800&h=450&fit=crop" },
            { title: "Realism Features: Weather and NPC AI Improvements", description: "Dynamic weather systems and revolutionary NPC artificial intelligence.", url: "https://www.pcgamer.com/gta6", source: { name: "PC Gamer" }, publishedAt: new Date(Date.now() - 36 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?w=800&h=450&fit=crop" },
            { title: "Soundtrack Revealed: Over 400 Licensed Songs", description: "Largest soundtrack in series history spanning multiple decades and genres.", url: "https://www.billboard.com/gta6", source: { name: "Billboard" }, publishedAt: new Date(Date.now() - 40 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800&h=450&fit=crop" },
            { title: "Vehicle Customization Reaches New Heights", description: "Unprecedented vehicle customization from classic cars to modern supercars.", url: "https://www.cnet.com/gta6", source: { name: "CNET" }, publishedAt: new Date(Date.now() - 48 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=800&h=450&fit=crop" },
            { title: "Housing System: Buy, Customize, Own Properties", description: "Purchase and fully customize multiple properties across Vice City.", url: "https://www.gamerant.com/gta6", source: { name: "Game Rant" }, publishedAt: new Date(Date.now() - 55 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&h=450&fit=crop" },
            { title: "Swimming and Diving Mechanics Overhauled", description: "Underwater exploration reaches new depths with improved diving mechanics.", url: "https://www.destructoid.com/gta6", source: { name: "Destructoid" }, publishedAt: new Date(Date.now() - 60 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800&h=450&fit=crop" },
            { title: "Character Creation System Unveiled", description: "Deep customization allows players to create unique protagonists.", url: "https://www.theverge.com/gta6", source: { name: "The Verge" }, publishedAt: new Date(Date.now() - 65 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1605810230434-7631ac76ec81?w=800&h=450&fit=crop" },
            { title: "Economy System: Stock Market and Businesses", description: "Players can invest in stocks and run multiple business ventures.", url: "https://www.forbes.com/gta6", source: { name: "Forbes" }, publishedAt: new Date(Date.now() - 70 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=800&h=450&fit=crop" },
            { title: "Multiplayer Heists Return With More Complexity", description: "Cooperative heists feature more planning and execution options.", url: "https://www.vg247.com/gta6", source: { name: "VG247" }, publishedAt: new Date(Date.now() - 75 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1556742111-a301076d9d18?w=800&h=450&fit=crop" },
            { title: "Day-Night Cycle Affects Gameplay Significantly", description: "Dynamic time system impacts missions, NPC behavior, and activities.", url: "https://www.gamesradar.com/gta6", source: { name: "GamesRadar" }, publishedAt: new Date(Date.now() - 80 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=450&fit=crop" },
            { title: "Wildlife System: 100+ Animal Species", description: "From alligators to exotic birds, wildlife enriches the environment.", url: "https://www.kotaku.com/gta6-wildlife", source: { name: "Kotaku" }, publishedAt: new Date(Date.now() - 85 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1614027164847-1b28cfe1df60?w=800&h=450&fit=crop" },
            { title: "Weapon Customization Goes Beyond Previous Games", description: "Modify every aspect of weapons from attachments to paint jobs.", url: "https://www.pcgamesn.com/gta6", source: { name: "PCGamesN" }, publishedAt: new Date(Date.now() - 90 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1595590424283-b8f17842773f?w=800&h=450&fit=crop" },
            { title: "Dialogue Choices Affect Story Outcomes", description: "Player decisions shape the narrative in meaningful ways.", url: "https://www.rockpapershotgun.com/gta6", source: { name: "Rock Paper Shotgun" }, publishedAt: new Date(Date.now() - 95 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1523741543316-beb7fc7023d8?w=800&h=450&fit=crop" },
            { title: "Fitness and Health System Introduced", description: "Character stats affected by diet, exercise, and lifestyle choices.", url: "https://www.ign.com/gta6-health", source: { name: "IGN" }, publishedAt: new Date(Date.now() - 100 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&h=450&fit=crop" },
            { title: "Clothing Stores Offer Thousands of Options", description: "Fashion system includes designer brands and street wear.", url: "https://www.fashionista.com/gta6", source: { name: "Fashionista" }, publishedAt: new Date(Date.now() - 105 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=450&fit=crop" },
            { title: "Radio Stations Feature Live DJ Commentary", description: "Dynamic radio with real-time weather updates and news reports.", url: "https://www.billboard.com/gta6-radio", source: { name: "Billboard" }, publishedAt: new Date(Date.now() - 110 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?w=800&h=450&fit=crop" },
            { title: "Nightclub Management Mini-Game Revealed", description: "Run your own club with DJs, security, and VIP areas.", url: "https://www.dexerto.com/gta6", source: { name: "Dexerto" }, publishedAt: new Date(Date.now() - 115 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1566417713940-fe7c737a9ef2?w=800&h=450&fit=crop" },
            { title: "Fishing Mechanics Include 50+ Fish Species", description: "Catch and sell fish or mount trophies in your properties.", url: "https://www.outdoorlife.com/gta6", source: { name: "Outdoor Life" }, publishedAt: new Date(Date.now() - 120 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1544552866-d3ed42536cfd?w=800&h=450&fit=crop" },
            { title: "Photography Mode With Advanced Camera Controls", description: "Professional photo mode with filters and social sharing.", url: "https://www.digitaltrends.com/gta6", source: { name: "Digital Trends" }, publishedAt: new Date(Date.now() - 125 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1495107334309-fcf20504a5ab?w=800&h=450&fit=crop" },
            { title: "Parkour System Adds Vertical Gameplay", description: "Climb buildings and navigate urban environments freely.", url: "https://www.eurogamer.net/gta6-parkour", source: { name: "Eurogamer" }, publishedAt: new Date(Date.now() - 130 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1571902943202-507ec2618e8f?w=800&h=450&fit=crop" },
            { title: "Pet System: Dogs, Cats, and Exotic Animals", description: "Adopt and care for pets that accompany you on adventures.", url: "https://www.polygon.com/gta6-pets", source: { name: "Polygon" }, publishedAt: new Date(Date.now() - 135 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1450778869180-41d0601e046e?w=800&h=450&fit=crop" },
            { title: "Casino Games Expanded With New Options", description: "Poker, blackjack, slots, and new casino mini-games.", url: "https://www.casinopedia.org/gta6", source: { name: "Casino News" }, publishedAt: new Date(Date.now() - 140 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1596838132731-3301c3fd4317?w=800&h=450&fit=crop" },
            { title: "Flight School Returns With More Aircraft", description: "Learn to fly helicopters, planes, and experimental aircraft.", url: "https://www.flightsimulator.com/gta6", source: { name: "Flight Sim News" }, publishedAt: new Date(Date.now() - 145 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=800&h=450&fit=crop" },
            { title: "Restaurant Business: Open Your Own Eatery", description: "Manage menus, hire staff, and expand your food empire.", url: "https://www.eater.com/gta6", source: { name: "Eater" }, publishedAt: new Date(Date.now() - 150 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800&h=450&fit=crop" },
            { title: "Drug Empire Mechanics Detailed", description: "Build a criminal enterprise with production and distribution networks.", url: "https://www.vice.com/gta6", source: { name: "VICE" }, publishedAt: new Date(Date.now() - 155 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=450&fit=crop" },
            { title: "Music Production Studio Mini-Game", description: "Create and sell your own music tracks in-game.", url: "https://www.musictech.net/gta6", source: { name: "MusicTech" }, publishedAt: new Date(Date.now() - 160 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1598653222000-6b7b7a552625?w=800&h=450&fit=crop" },
            { title: "Racing Scene: Street and Professional Circuits", description: "Compete in underground races and sanctioned motorsports.", url: "https://www.motortrend.com/gta6", source: { name: "Motor Trend" }, publishedAt: new Date(Date.now() - 165 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?w=800&h=450&fit=crop" },
            { title: "Surfing Mechanics With Competition Events", description: "Ride waves and compete in surfing tournaments.", url: "https://www.surfer.com/gta6", source: { name: "Surfer Magazine" }, publishedAt: new Date(Date.now() - 170 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1502933691298-84fc14542831?w=800&h=450&fit=crop" },
            { title: "Boxing and MMA Gyms Available", description: "Train in martial arts and compete in fight leagues.", url: "https://www.mmaweekly.com/gta6", source: { name: "MMA Weekly" }, publishedAt: new Date(Date.now() - 175 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1549719386-74dfcbf7dbed?w=800&h=450&fit=crop" },
            { title: "Yacht Ownership and Maritime Activities", description: "Buy luxury yachts and host parties on the water.", url: "https://www.yachtingmagazine.com/gta6", source: { name: "Yachting" }, publishedAt: new Date(Date.now() - 180 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1569263979104-865ab7cd8d13?w=800&h=450&fit=crop" },
            { title: "Tattoo Parlors With Custom Designs", description: "Get inked with thousands of designs or create your own.", url: "https://www.inkedmag.com/gta6", source: { name: "Inked Magazine" }, publishedAt: new Date(Date.now() - 185 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1565058683862-0a0e46b0a65c?w=800&h=450&fit=crop" },
            { title: "Barber Shops Offer Dynamic Hairstyles", description: "Hair grows over time and can be styled in countless ways.", url: "https://www.menshealth.com/gta6", source: { name: "Men's Health" }, publishedAt: new Date(Date.now() - 190 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1503951914875-452162b0f3f1?w=800&h=450&fit=crop" },
            { title: "Smart Home Technology in Properties", description: "Control lights, security, and entertainment in your homes.", url: "https://www.theverge.com/gta6-smarthome", source: { name: "The Verge" }, publishedAt: new Date(Date.now() - 195 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1558089687-4d023c0f7ac0?w=800&h=450&fit=crop" },
            { title: "Collectibles: 500+ Items to Find", description: "Hunt for hidden packages, street art, and rare treasures.", url: "https://www.gamesradar.com/gta6-collectibles", source: { name: "GamesRadar" }, publishedAt: new Date(Date.now() - 200 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1531299204812-e6d44d9a185c?w=800&h=450&fit=crop" },
            { title: "Social Media System Integrated Into Gameplay", description: "In-game phone has functioning social media apps.", url: "https://www.techcrunch.com/gta6", source: { name: "TechCrunch" }, publishedAt: new Date(Date.now() - 205 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=800&h=450&fit=crop" },
            { title: "Movie Theater Shows In-Game Films", description: "Watch full-length movies and animated shorts in theaters.", url: "https://www.variety.com/gta6", source: { name: "Variety" }, publishedAt: new Date(Date.now() - 210 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=800&h=450&fit=crop" },
            { title: "Golf Courses With 18-Hole Gameplay", description: "Play complete rounds of golf with physics-based mechanics.", url: "https://www.golf.com/gta6", source: { name: "Golf Magazine" }, publishedAt: new Date(Date.now() - 215 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1535131749006-b7f58c99034b?w=800&h=450&fit=crop" },
            { title: "Tennis Matches Against NPCs and Players", description: "Compete in singles and doubles tennis tournaments.", url: "https://www.tennis.com/gta6", source: { name: "Tennis Magazine" }, publishedAt: new Date(Date.now() - 220 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1554068865-24cecd4e34b8?w=800&h=450&fit=crop" },
            { title: "Art Gallery: Buy and Display Masterpieces", description: "Collect artwork and curate your own gallery spaces.", url: "https://www.artnet.com/gta6", source: { name: "Artnet News" }, publishedAt: new Date(Date.now() - 225 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1513364776144-60967b0f800f?w=800&h=450&fit=crop" },
            { title: "Brewery Business: Craft Your Own Beer", description: "Create and distribute craft beers across Vice City.", url: "https://www.craftbeer.com/gta6", source: { name: "Craft Beer" }, publishedAt: new Date(Date.now() - 230 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1535958636474-b021ee887b13?w=800&h=450&fit=crop" },
            { title: "Security Company: Offer Protection Services", description: "Run bodyguard services and armored transport operations.", url: "https://www.securitymagazine.com/gta6", source: { name: "Security Magazine" }, publishedAt: new Date(Date.now() - 235 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1603484477859-abe6a73f9366?w=800&h=450&fit=crop" },
            { title: "Construction Company Management", description: "Build and renovate properties across the city.", url: "https://www.constructiondive.com/gta6", source: { name: "Construction Dive" }, publishedAt: new Date(Date.now() - 240 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800&h=450&fit=crop" },
            { title: "Taxi Service: Drive for Money", description: "Pick up fares and build your own cab company.", url: "https://www.taxitoday.com/gta6", source: { name: "Taxi Today" }, publishedAt: new Date(Date.now() - 245 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=800&h=450&fit=crop" },
            { title: "Ambulance Missions With Medical Gameplay", description: "Save lives and unlock paramedic abilities.", url: "https://www.ems1.com/gta6", source: { name: "EMS1" }, publishedAt: new Date(Date.now() - 250 * 60 * 60 * 1000).toISOString(), urlToImage: "https://images.unsplash.com/photo-1587745416684-47953f16f02f?w=800&h=450&fit=crop" }
        ];

        async function fetchGTA6News() {
            const container = safeGetElement('newsContainer');
            if (!container) return;

            container.innerHTML = '<div style="text-align: center; padding: 2rem;"><div style="display: inline-block; width: 20px; height: 20px; border: 2px solid var(--primary-color); border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div></div>';

            try {
                const url = `https://newsapi.org/v2/everything?q=GTA%206&apiKey=${API_CONFIG.news}&sortBy=publishedAt&pageSize=50`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.articles && data.articles.length > 0 && data.status !== 'error') {
                    displayNews(data.articles, container);
                    updateNewsStats(data.articles);
                    showNotification(`üì∞ Loaded ${data.articles.length} real articles!`);
                    awardRewards(15, 4, 'News loaded');
                } else {
                    throw new Error(data.message || 'API error, using mock data');
                }
            } catch (error) {
                console.log('Using mock news data:', error.message);
                // Use mock data as fallback
                displayNews(mockNewsArticles, container);
                updateNewsStats(mockNewsArticles);
                showNotification(`üì∞ Loaded ${mockNewsArticles.length} articles!`);
                awardRewards(15, 4, 'News loaded');
            }
        }

        function displayNews(articles, container) {
            const valid = articles.filter(a => a.title && a.title !== '[Removed]');
            
            container.style.display = 'grid';
            container.style.gridTemplateColumns = 'repeat(auto-fill, minmax(320px, 1fr))';
            container.style.gap = '1.5rem';
            
            container.innerHTML = valid.slice(0, 50).map(article => {
                const timeAgo = getTimeAgo(new Date(article.publishedAt));
                const source = article.source?.name || 'Source';
                const imageUrl = article.urlToImage || 'https://images.unsplash.com/photo-1511512578047-dfb367046420?w=800&h=450&fit=crop';
                
                return `
                    <article style="background: var(--card-bg); border-radius: 12px; overflow: hidden; cursor: pointer; border: 1px solid var(--border-color); transition: all 0.3s ease;" 
                             onclick="window.open('${article.url}', '_blank')"
                             onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(0,255,162,0.3)';"
                             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                        <div style="position: relative; width: 100%; padding-top: 56.25%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); overflow: hidden;">
                            <img src="${imageUrl}" 
                                 alt="${article.title}"
                                 style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;"
                                 onerror="this.src='https://images.unsplash.com/photo-1511512578047-dfb367046420?w=800&h=450&fit=crop'">
                            <div style="position: absolute; bottom: 0.5rem; right: 0.5rem; background: rgba(0,0,0,0.8); color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                üì∞ NEWS
                            </div>
                        </div>
                        <div style="padding: 1rem;">
                            <h3 style="color: var(--text-color); margin-bottom: 0.5rem; font-size: 1rem; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">${article.title}</h3>
                            <div style="color: var(--primary-color); font-size: 0.75rem; margin-bottom: 0.5rem; font-weight: 600;">
                                ${source}
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem; color: rgba(255,255,255,0.6);">
                                <span>üïí ${timeAgo}</span>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');
        }

        function updateNewsStats(articles) {
            safeUpdateText('newsCount', articles.length);
            safeUpdateText('newsWeekly', articles.length * 7);
            safeUpdateText('newsSources', new Set(articles.map(a => a.source?.name)).size);
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return 'Just now';
            if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
            if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
            if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;
            return `${Math.floor(seconds / 604800)}w ago`;
        }

        function sendChatMessage() {
            const input = safeGetElement('chatInput');
            if (input && input.value.trim()) {
                const msg = input.value.trim();
                const container = safeGetElement('chatMessages');
                if (container) {
                    const div = document.createElement('div');
                    div.style.cssText = 'padding: 0.5rem; margin: 0.5rem 0; background: rgba(0,255,162,0.1); border-radius: 8px; border-left: 3px solid var(--primary-color);';
                    div.innerHTML = `<div style="color: var(--primary-color); font-weight: 600; font-size: 0.8rem;">You</div><div>${msg}</div>`;
                    container.appendChild(div);
                    container.scrollTop = container.scrollHeight;
                }
                input.value = '';
                awardRewards(5, 2, 'Message sent');
            }
        }

        let memoryGameState = { flippedCards: [], matches: 0, moves: 0, startTime: null, timer: null };

        function setupMemoryGame() {
            const container = safeGetElement('memoryGame');
            if (!container) return;
            
            const symbols = ['üéÆ', 'üöó', 'üí∞', 'üî´', 'üéØ', 'üëë', 'üíé', 'üî•'];
            const cards = [...symbols, ...symbols].sort(() => Math.random() - 0.5);
            
            container.innerHTML = cards.map((symbol, i) => 
                `<div style="background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 8px; aspect-ratio: 1; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.2rem;" 
                     data-symbol="${symbol}" data-index="${i}" onclick="flipCard(${i})">
                    <div class="card-back" style="color: var(--primary-color);">?</div>
                    <div class="card-front" style="display: none;">${symbol}</div>
                </div>`
            ).join('');
        }

        function startMemoryGame() {
            memoryGameState = { flippedCards: [], matches: 0, moves: 0, startTime: null, timer: null };
            safeUpdateText('memoryMoves', '0');
            safeUpdateText('memoryTimer', '0:00');
            setupMemoryGame();
            showNotification('New game started!');
        }

        function flipCard(index) {
            const card = document.querySelector(`[data-index="${index}"]`);
            if (!card || memoryGameState.flippedCards.includes(index)) return;

            const back = card.querySelector('.card-back');
            const front = card.querySelector('.card-front');
            back.style.display = 'none';
            front.style.display = 'block';
            
            memoryGameState.flippedCards.push(index);
            
            if (!memoryGameState.startTime) {
                memoryGameState.startTime = Date.now();
                memoryGameState.timer = setInterval(() => {
                    const elapsed = Math.floor((Date.now() - memoryGameState.startTime) / 1000);
                    safeUpdateText('memoryTimer', `${Math.floor(elapsed / 60)}:${(elapsed % 60).toString().padStart(2, '0')}`);
                }, 1000);
            }
            
            if (memoryGameState.flippedCards.length === 2) {
                memoryGameState.moves++;
                safeUpdateText('memoryMoves', memoryGameState.moves);
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            const [first, second] = memoryGameState.flippedCards;
            const card1 = document.querySelector(`[data-index="${first}"]`);
            const card2 = document.querySelector(`[data-index="${second}"]`);
            
            if (card1?.dataset.symbol === card2?.dataset.symbol) {
                memoryGameState.matches++;
                awardRewards(20, 5, 'Match!');
                if (memoryGameState.matches === 8) {
                    clearInterval(memoryGameState.timer);
                    awardRewards(100, 25, 'Game completed!');
                    challengeStats.completed++;
                    challengeStats.score += 100;
                    updateChallengeStats();
                }
            } else {
                [card1, card2].forEach(card => {
                    if (card) {
                        card.querySelector('.card-back').style.display = 'block';
                        card.querySelector('.card-front').style.display = 'none';
                    }
                });
            }
            memoryGameState.flippedCards = [];
        }

        function loadTrivia() {
            const questions = [
                { q: "Which city is GTA Vice City based on?", options: ["Miami", "LA", "NY", "Chicago"], correct: "Miami" },
                { q: "Protagonist in GTA San Andreas?", options: ["CJ", "Tommy", "Niko", "Michael"], correct: "CJ" },
                { q: "GTA game with 3 protagonists?", options: ["IV", "V", "SA", "VC"], correct: "V" }
            ];
            
            const q = questions[Math.floor(Math.random() * questions.length)];
            safeUpdateText('triviaQuestion', q.q);
            
            const container = safeGetElement('triviaOptions');
            if (container) {
                container.innerHTML = q.options.map(opt =>
                    `<button style="background: var(--accent-color); border: none; color: white; padding: 0.5rem; border-radius: 8px; cursor: pointer;" 
                            onclick="answerTrivia('${opt}', '${q.correct}')">${opt}</button>`
                ).join('');
            }
        }

        function answerTrivia(selected, correct) {
            if (selected === correct) {
                awardRewards(10, 5, 'Correct!');
                challengeStats.score += 10;
                updateChallengeStats();
            } else {
                showNotification(`Wrong! Answer: ${correct}`);
            }
            setTimeout(loadTrivia, 2000);
        }

        function initializeChallenges() {
            updateChallengeStats();
            setupMemoryGame();
            loadTrivia();
        }

        function updateChallengeStats() {
            safeUpdateText('challengesCompleted', challengeStats.completed);
            safeUpdateText('currentStreak', challengeStats.streak);
            safeUpdateText('totalScore', challengeStats.score.toLocaleString());
        }

        function startCountdown() {
            const target = new Date('2026-05-26T12:00:00Z');
            
            setInterval(() => {
                const now = new Date();
                const diff = target - now;
                
                if (diff <= 0) return;
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                safeUpdateText('days', days);
                safeUpdateText('hours', hours);
                safeUpdateText('minutes', minutes);
                safeUpdateText('seconds', seconds);
            }, 1000);
        }

        function updateOnlineCount() {
            safeUpdateText('onlineCount', (Math.floor(Math.random() * 1000) + 12000).toLocaleString());
            setTimeout(updateOnlineCount, 30000);
        }

        function copyReferralCode() {
            showNotification('Code copied!');
            awardRewards(5, 2, 'Code copied');
        }

        function shareForReward() {
            showNotification('Share feature coming soon!');
            awardRewards(10, 5, 'Share clicked');
        }

        function initApp() {
            updateUserInterface();
            startCountdown();
            updateOnlineCount();
            
            document.getElementById('trailerPreview')?.addEventListener('click', () => {
                safeGetElement('trailerPreview').style.display = 'none';
                safeGetElement('trailerPlayer').style.display = 'block';
            });

            document.getElementById('chatInput')?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendChatMessage();
            });

            const feedbackBtn = safeGetElement('feedbackBtn');
            const feedbackModal = safeGetElement('feedbackModal');
            const closeModal = safeGetElement('closeModal');
            
            feedbackBtn?.addEventListener('click', () => {
                feedbackModal.style.display = 'flex';
            });
            
            closeModal?.addEventListener('click', () => {
                feedbackModal.style.display = 'none';
            });

            const betaBanner = safeGetElement('beta-banner');
            const betaClose = safeGetElement('beta-banner-close');
            if (betaBanner && safeGetStorage('betaBannerDismissed', 'false') !== 'true') {
                betaBanner.style.display = 'block';
                setTimeout(() => {
                    betaBanner.style.transform = 'translateY(0)';
                    betaBanner.style.opacity = '1';
                }, 50);
            }
            betaClose?.addEventListener('click', () => {
                betaBanner.style.transform = 'translateY(-100%)';
                betaBanner.style.opacity = '0';
                setTimeout(() => {
                    betaBanner.style.display = 'none';
                    safeSetStorage('betaBannerDismissed', 'true');
                }, 600);
            });

            const disclaimerBanner = safeGetElement('disclaimer-banner');
            const disclaimerClose = safeGetElement('disclaimer-banner-close');
            if (disclaimerBanner && safeGetStorage('disclaimerDismissed', 'false') !== 'true') {
                disclaimerBanner.style.display = 'block';
                setTimeout(() => {
                    disclaimerBanner.style.transform = 'translateY(0)';
                    disclaimerBanner.style.opacity = '1';
                }, 100);
            }
            disclaimerClose?.addEventListener('click', () => {
                disclaimerBanner.style.transform = 'translateY(100%)';
                disclaimerBanner.style.opacity = '0';
                setTimeout(() => {
                    disclaimerBanner.style.display = 'none';
                    safeSetStorage('disclaimerDismissed', 'true');
                }, 600);
            });

            setTimeout(() => {
                showNotification('üéÆ Welcome to GTAFastLane!');
            }, 1000);

            setTimeout(() => {
                fetchGTA6News();
            }, 2000);
        }

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
